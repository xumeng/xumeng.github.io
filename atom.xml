<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Amon&#39;s Blog</title>
  
  <subtitle>çŒ›çŒ›å¦‚ç‰</subtitle>
  <link href="https://amonxu.com/atom.xml" rel="self"/>
  
  <link href="https://amonxu.com/"/>
  <updated>2024-05-24T11:55:41.809Z</updated>
  <id>https://amonxu.com/</id>
  
  <author>
    <name>Amon Xu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æˆ‘æ˜¯ä¸€ä¸ª HRï¼Œç¢°åˆ°ç–‘ä¼¼â€œå¤–æ˜Ÿäººâ€ï¼Œå±…ç„¶è®©æˆ‘å¸®ä»–ä¿®ç†æ˜Ÿé™…é£èˆ¹ï¼Ÿï¼</title>
    <link href="https://amonxu.com/2024/05/24/zh-CN/2024-05-24-HR-uses-Jobot-to-help-an-alien-repair-a-spaceship/"/>
    <id>https://amonxu.com/2024/05/24/zh-CN/2024-05-24-HR-uses-Jobot-to-help-an-alien-repair-a-spaceship/</id>
    <published>2024-05-24T11:10:22.000Z</published>
    <updated>2024-05-24T11:55:41.809Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘æ˜¯ä¸€ä¸ª HRï¼Œç¢°åˆ°ç–‘ä¼¼â€œå¤–æ˜Ÿäºº â€ï¼Œå±…ç„¶è®©æˆ‘å¸®ä»–ä¿®ç†æ˜Ÿé™…é£èˆ¹ï¼Ÿï¼</p><p>æœ¬æ¥æˆ‘æƒ³æ‹’ç»ï¼Œä½†æ˜¯ä»–å¤§æ‰‹ä¸€æŒ¥ï¼Œæˆ‘é£å‡ºäº†ä¸‰ç±³è¿œã€‚æ›´æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œå››åƒå¹´å‰çš„é‡‘å­—å¡”å±…ç„¶ä¹Ÿå’Œä»–æœ‰å…³ï¼</p><p><img src="https://img.amonxu.com/file/cfb45defed13eac282b7c.png"></p><hr><p>å°±åœ¨ä¸¤å¤©å‰ï¼Œä¸€ä¸ªæ™®é€šçš„å·¥ä½œæ—¥åˆåï¼Œæˆ‘ç»“æŸäº†ä¸€ä¸Šåˆç¹å¿™çš„äººäº‹å·¥ä½œï¼Œå…³ä¸Šå±å¹•ï¼Œå‡†å¤‡å¥½å¥½ç¡ä¸ªåˆè§‰ã€‚</p><p>çœ¼å‰çš„ä¸–ç•Œé€æ¸æ˜æš—ï¼Œçª—å¤–æ—¶ä¸æ—¶ä¼ æ¥æ±½è½¦è¡Œé©¶å’Œç©ºè°ƒçš„è¿è½¬å£°éŸ³ï¼Œæˆ‘çš„å¤§è„‘æ…¢æ…¢é™ä½é¢‘ç‡ï¼Œè¿›å…¥äº†ç¡çœ æ¨¡å¼ ã€‚</p><p>å¥‡æ€ªï¼Œæˆ‘çš„èº«ä½“ä»¿ä½›åœ¨ä¸‹æ²‰ï¼Œè¿˜æ²¡æ¥åŠç»†æƒ³ï¼Œä¸‹æ²‰çš„é€Ÿåº¦å˜å¾—è¶Šæ¥è¶Šå¿«ï¼Œä¼´éšç€åˆºçœ¼çš„å…‰èŠ’å’Œå·¨å¤§çš„è½°é¸£å£°ï¼Œè¿˜æ²¡æ¥åŠååº”è¿‡æ¥ï¼Œèº«ä½“å°±è¢«ä¸€è‚¡å¼ºå¤§çš„åŠ›é‡æ‹‰äº†ä¸‹å»ï¼Œæˆ‘å¤±å»äº†çŸ¥è§‰ã€‚</p><hr><p>ç­‰å†æ¬¡é†’æ¥æ—¶ï¼Œæˆ‘è¿˜åœ¨åŠå…¬å®¤çš„å·¥ä½ä¸Šï¼Œä½†å¥‡æ€ªçš„æ˜¯åŒäº‹ä»¬éƒ½ä¸è§äº†ã€‚</p><p>ä¸€ä¸ªèº«èº¯é«˜å¤§ã€å¤–å½¢ä¸‘é™‹ã€æµ‘èº«å¥½åƒåŒ…è£¹ç€é‡‘å±çŸ³æ¿çš„å¥‡æ€ªç”Ÿç‰©èµ°äº†å‡ºæ¥ï¼Œå®ƒçš„çœ¼ç›é—ªçƒç€çš„è“å…‰ã€‚</p><p>æˆ‘æƒŠæåœ°å‘åé€€äº†ä¸¤æ­¥ï¼Œâ€œä½ æ˜¯ï¼Ÿâ€</p><p>â€œ<em>ï¿½</em>* î‚¢î†Šï¿½ â€</p><p>â€œæˆ‘å¬ä¸æ‡‚â€ éš¾é“ç¢°åˆ°äº†å¤–æ˜Ÿäººï¼Ÿ</p><p>â€œé”Ÿæ–¤æ‹·æ‰“é”Ÿé”Ÿâ€ æ€ªç‰©æ£€ç´¢ç€è¯­è¨€ï¼Œâ€œå‘µå‘µ å°è™«è™«ï¼Œåˆå’Œå°è™«è™«è§é¢äº†â€</p><hr><p>â€œä½ æ˜¯ï¼Ÿâ€ æˆ‘è„‘ä¸­æœ‰ä¸€ç™¾ä¸‡ä¸ªé—®é¢˜ï¼Œä½†ç°åœ¨åªèƒ½åå‡ºè¿™ä¸¤ä¸ªå­—ã€‚</p><p>â€œå°è™«è™«ï¼ŒTL;DR ï¼Œæˆ‘æ˜¯è¿©è¿“ï¼Œä»éš”å£æ˜Ÿç³»å›¢è¿‡æ¥çš„ï¼Œè·¯ä¸Šé‡åˆ°ç‚¹çŠ¶å†µï¼Œè·ƒè¿æœºå‡ºäº†æ¯›ç—…â€¦â€</p><p>â€œéš”å£æ˜Ÿç³»å›¢ï¼Ÿè·ƒè¿æœºï¼Ÿâ€ æˆ‘æ»¡è„¸ç–‘æƒ‘ï¼Œåªå¬æ‡‚ä»–ä¼¼ä¹å«äºŒç‰™ã€‚</p><p>â€œå®³ å°è™«è™«ï¼Œå°±ä½ ä»¬éš”å£ä¸è¿œã€‚æˆ‘éœ€è¦å‡ ä½ç»´ä¿®å·¥ç¨‹å¸ˆä¿®ç†æˆ‘çš„è·ƒè¿æœºï¼Œä¹Ÿå°±æ˜¯â€¦äº¤é€šå·¥å…·ï¼Œé£èˆ¹ã€‚â€</p><p>â€œæœ¬æ¥æ˜¯ä¸éœ€è¦ä½ ä»¬å°è™«è™«çš„ï¼Œä½†æ˜¯æˆ‘çš„åŒä¼´ä»¬éƒ½ç‰ºç‰²äº†ï¼Œåªèƒ½â€¦â€ äºŒç‰™ä¸‘é™‹çš„é¢å­”ä¸Šåˆ’è¿‡ä¸€ä¸æ‚²ä¼¤ï¼Œçœ‹å‘äº†æˆ‘ã€‚</p><p>â€œæˆ‘â€¦æˆ‘æ˜¯ä¸€ä¸ª HR ï¼Œä¸ä¼šç»´ä¿®é£èˆ¹ã€‚â€ æˆ‘å°½é‡è®©è‡ªå·±çš„å£°éŸ³å¬èµ·æ¥é•‡å®šã€‚</p><p>â€œHR ä¸æ˜¯ä¼šæ‰¾äººå—ï¼Œèµ¶ç´§æ‰¾äººï¼ç«‹åˆ»é©¬ä¸Šï¼â€ äºŒç‰™æŠŠå·¨å¤´çŒ›ä¸€å‡‘è¿‘ï¼Œä¸€è‚¡æ°”æµæ’åˆ°æˆ‘èº«ä¸Šï¼Œæˆ‘è¿è¿é€€äº†å‡ ç±³è¿œã€‚</p><p>â€œå¥½å¥½å¥½ï¼æˆ‘â€¦æˆ‘é©¬ä¸Šæ‰¾ï¼é©¬ä¸Šæ‰¾ï¼â€ æˆ‘æ‰¶ç€å¢™ä¸€é˜µå¤´æ™•ç›®çœ©ï¼Œç›˜ç®—ç€å»å“ªæ‰¾ä¼šç»´ä¿®é£èˆ¹çš„äººã€‚</p><p>â€œè¿˜åœ¨ç­‰ä»€ä¹ˆï¼è€½è¯¯æˆ‘çš„å¤§äº‹ï¼Œå°è™«è™«ä¼šä»˜å‡ºä»£ä»·ï¼â€ äºŒç‰™çœ‹æˆ‘è¿˜å‘†åœ¨åŸåœ°ï¼Œä¸è€çƒ¦åœ°å’§ç€å¤§å˜´ï¼ŒåˆæŠŠå¤´çŒ›åœ°ä¸€å‡‘ã€‚</p><p>å‘¯ï¼åŠå…¬å®¤çš„æ¡Œå­æ¤…å­è¿å¸¦ç€æ¡Œä¸Šçš„ä¸œè¥¿éƒ½é£äº†èµ·æ¥ï¼Œç„¶åé‡é‡ç ¸åœ¨å¢™ä¸Šã€‚</p><hr><p>æˆ‘èµ¶ç´§çˆ¬èµ·æ¥æ‰“å¼€ç”µè„‘ï¼Œåœ¨æ‹›è˜ç½‘ç«™ä¸Šæœç´¢â€œç»´ä¿®å·¥â€ï¼Œä½†å‡ ä¹éƒ½æ˜¯äº›æ°´ç®¡ã€ç©ºè°ƒç»´ä¿®ï¼Œä¸€æ— æ‰€è·ã€‚</p><p>çªç„¶ï¼Œæˆ‘ç¥è§ä¹‹å‰ç¾¤é‡Œæœ‰äººåˆ†äº«çš„ä¸€ä¸ªèŒä½æè¿°è‡ªåŠ¨ç”Ÿæˆå·¥å…·ï¼š<strong>èŒç”Ÿæœº</strong> </p><p><a href="https://jobot.gegegugu.com/">èŒç”Ÿæœº Jobot - èŒä½æè¿°ç”Ÿæˆæœºå™¨, ä¸“æ³¨æ™ºèƒ½æ‹›è˜jobot.gegegugu.com<img src="https://pic2.zhimg.com/v2-b6e52857d3b63cef1db99ccb5fec3ebd_180x120.jpg" alt="img"></a></p><p>èŒç”ŸæœºèŒç”Ÿæœºï¼Œèƒ½ä¸èƒ½æœ‰æœ‰ä¸€ä¸ç”Ÿæœºåªèƒ½é ä½ äº†ï¼</p><p>æˆ‘é£å¿«è¾“å…¥â€œ<strong>æ€¥æ‹›é£èˆ¹ä¿®ç†äººå‘˜ï¼Œå¸®åŠ©å¤–æ˜ŸäººäºŒç‰™å›å®¶</strong>â€ï¼Œç‚¹å‡»ç”ŸæˆæŒ‰é’®ï¼Œ</p><iframe width="560" height="315" src="https://vdn3.vzuu.com/HD/d64856b0-199d-11ef-8270-be32fcfb9588-v8_f2_t1_1E4tL4rN.mp4?disable_local_cache=1&bu=1513c7c2&c=avc.8.0&f=mp4&expiration=1716553438&auth_key=1716553438-0-0-b2b45152c92d0a79313bfb1c2c869095&v=tx&pu=4e83193b&pp=ChMxNDAxNjIzODY1NzM5NTc5MzkyGGMiC2ZlZWRfY2hvaWNlMhMxMzY5MDA1NjA4NTk5OTA0MjU3PXu830Q%3D&pf=Web&pt=zhihu" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>å“—å•¦å•¦ï½èŒä½æè¿°å†…å®¹å‡ ç§’ç§å°±ç”Ÿæˆå‡ºæ¥äº†ï¼å˜¿å˜¿å˜¿ï¼Œè¿™ä¸‹åº”è¯¥èƒ½ä¾¥å¹¸æ¡å›ä¸€æ¡å‘½äº†ã€‚</p><hr><p>æ­£æ¬£å–œæ—¶ï¼Œæˆ‘ä¸€å›å¤´çœ‹åˆ°ç«™åœ¨èº«åçš„äºŒç‰™ã€‚</p><p>â€è¿™å°±æ˜¯ä½ ä»¬å°è™«è™«çš„æ™ºèƒ½å—ï¼Ÿâ€œ äºŒç‰™æ˜¾å¾—æœ‰äº›æƒŠè®¶ã€‚</p><p>â€æ˜¯çš„ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€æ–°çš„æ™ºèƒ½å·¥å…·ï¼Œèƒ½å¤§å¤§æé«˜æ‹›è˜å’Œå·¥ä½œæ•ˆç‡â€œ</p><p>â€å‘µå‘µï¼Œå°è™«è™«â€œ äºŒç‰™ä»°å¤´ç¬‘äº†èµ·æ¥ï¼Œå¥½åƒä»åœ°ç‹±æ·±æ¸Šä¼ æ¥äº†å‡ ä¸å¹²ç¬‘â€ï¼Œâ€ä½ ä»¬çš„æ™ºèƒ½ï¼Œå°±æ˜¯ç”¨åœ¨è¿™ç§çç¢çš„äº‹æƒ…ä¸Šå—ï¼Ÿâ€œ</p><p>æˆ‘æ³¨è§†ç€ä»–ï¼Œæ— è¨€ä»¥å¯¹ã€‚</p><p>â€œå‡ åƒå¹´å‰æˆ‘æ¥è¿‡è¿™é‡Œï¼Œé‚£æ—¶å€™ä½ ä»¬è¿™äº›å°è™«è™«å–œæ¬¢ç›–æˆ¿å­ï¼Œå‡ åƒå¹´è¿‡å»äº†ï¼Œå°è™«è™«çš„æ™ºèƒ½è¿˜æ˜¯è¿™ä¹ˆä½çº§â€ äºŒç‰™ä¸å±‘åœ°çœ‹ç€æˆ‘ã€‚</p><p>â€œå‡ åƒå¹´å‰â€¦ä½ æ¥è¿‡è¿™é‡Œï¼Ÿä»€ä¹ˆç›–æˆ¿å­ï¼Ÿâ€ æˆ‘æ›´åŠ ç–‘æƒ‘äº†ã€‚</p><p>â€œç”¨çŸ³å¤´ç›–æˆ¿å­ï¼Œåæ¥æˆ‘çœ‹çš„ç€æ€¥ï¼Œåªå¥½å¸®ä»–ä»¬ä¹Ÿç›–äº†å‡ ä¸ªå°æˆ¿å­ï¼Œé¡ºä¾¿ï¼ŒæŠŠä»–ä»¬ä¹Ÿç›–åœ¨é‡Œé¢äº†â€¦â€ã€‚</p><p>äºŒç‰™è¯´è¯é—´éšæ‰‹ä¸€æŒ‡ï¼Œç©ºä¸­å‡ºç°ä¸€å›¢å…‰èŠ’ï¼Œæ¥ç€å‡ åº§é‡‘å­—å¡”çš„æ¨¡å‹æ˜¾ç°äº†å‡ºæ¥ã€‚</p><p>â€œé‡‘å­—å¡”ï¼Ÿé‡‘å­—å¡”æ˜¯ä½ å»ºçš„ï¼Ÿï¼Ÿï¼Ÿâ€æˆ‘éœ‡æƒŠåœ°çœ‹å‘ä»–ã€‚</p><p>â€œæ²¡é”™ã€‚â€ äºŒç‰™ä¼¼ä¹åœ¨æè¿°ä¸€ä»¶å¾®ä¸è¶³é“çš„äº‹æƒ…ã€‚</p><p>å®ï½å®ï½å®ï½ æ˜¯æ±‚èŒè€…ä»¬å‘çš„æ‹›å‘¼æé†’ï¼Œæˆ‘èµ¶ç´§å›åˆ°ç”µè„‘å‰æŸ¥çœ‹ã€‚</p><hr><p>å‡ å¤©åï¼Œæˆ‘å†æ¬¡çœ‹åˆ°äº†äºŒç‰™ï¼Œä»–çš„èº«å½¢çœ‹èµ·æ¥æ¯”ä¸Šæ¬¡æ›´åŠ é«˜å¤§ï¼Œæ›´æœ‰åŠ›é‡ã€‚</p><p>â€œè°¢è°¢ä½ ä»¬ï¼Œå°è™«è™«ã€‚â€ ä»–çš„è¯­æ°”ç¼“å’Œäº†äº›ã€‚</p><p>â€œä¸å®¢æ°”ï¼Œæˆ‘ä»¬è¿˜ä¼šå†è§é¢å—ï¼Ÿâ€œ</p><p>â€ä¹Ÿè®¸å§ å“ˆå“ˆï¼Œå‡ åƒå¹´å‰ä½ ä»¬ä¹Ÿé—®è¿‡æˆ‘åŒæ ·çš„é—®é¢˜â€¦â€œ</p><p>â€œæ˜¯å—ï¼Ÿâ€ æˆ‘è„‘æµ·é‡Œæƒ³è±¡é‡‘å­—å¡”ä¸‹çš„è‹¦å·¥ä»¬é¢å¯¹è¿™ä¸ªå¯æ€•çš„æ€ªç‰©ï¼Œé—®å‡ºè¿™ä¸ªé—®é¢˜ã€‚</p><p>â€œå“ˆå“ˆå“ˆå“ˆï¼ŒæœèŒä¸çŸ¥æ™¦æœ”ï¼ŒèŸªè›„ä¸çŸ¥æ˜¥ç§‹ï¼Œå¯æ‚²å•Šâ€¦â€œ</p><p>äºŒç‰™é•¿é•¿åœ°å¹æ¯äº†ä¸€å£°ï¼Œæ‰­å¤´è¿›å…¥é£èˆ¹ï¼Œå¾ˆå¿«å°±æ¶ˆå¤±åœ¨å¤©ç©ºä¸­ã€‚</p><hr><p>é£èˆ¹å·¨å¤§çš„è½°é¸£å£°å’Œåˆºçœ¼çš„ç™½å…‰ï¼Œè®©æˆ‘é†’äº†è¿‡æ¥ã€‚</p><p>æˆ‘æŠ¬å¤´çœ‹åˆ°è‡ªå·±è¿˜åœ¨å·¥ä½ä¸Šï¼ŒåŠå…¬å®¤ä¸€åˆ‡å¦‚å¸¸ï¼ŒåŒäº‹ä»¬éƒ½åˆšåˆç¡é†’æ¥ï¼Œä¼¸ç€æ‡’è…°ã€‚</p><p>åªæ˜¯ç”µè„‘å±å¹•ä¸Šï¼Œè¿˜æ‰“å¼€ç€ <strong>èŒç”Ÿæœº</strong>çš„ç½‘é¡µ <a href="https://jobot.gegegugu.com/">jobot.gegegugu.com</a></p><p>ä¸Šé¢æ¸…æ¥šåœ°å†™ç€ï¼š<strong>æ€¥æ‹›é£èˆ¹ä¿®ç†äººå‘˜ï¼Œå¸®åŠ©å¤–æ˜ŸäººäºŒç‰™å›å®¶</strong></p><p><img src="https://img.amonxu.com/file/c342a2b7914ef4ac6fc3d.png" alt="èŒç”Ÿæœº-å¸®åŠ©HRèŠ‚çœæ—¶é—´å¸®åŠ©å¤–æ˜Ÿäººå›å®¶"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æˆ‘æ˜¯ä¸€ä¸ª HRï¼Œç¢°åˆ°ç–‘ä¼¼â€œå¤–æ˜Ÿäºº â€ï¼Œå±…ç„¶è®©æˆ‘å¸®ä»–ä¿®ç†æ˜Ÿé™…é£èˆ¹ï¼Ÿï¼&lt;/p&gt;
&lt;p&gt;æœ¬æ¥æˆ‘æƒ³æ‹’ç»ï¼Œä½†æ˜¯ä»–å¤§æ‰‹ä¸€æŒ¥ï¼Œæˆ‘é£å‡ºäº†ä¸‰ç±³è¿œã€‚æ›´æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œå››åƒå¹´å‰çš„é‡‘å­—å¡”å±…ç„¶ä¹Ÿå’Œä»–æœ‰å…³ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.amonxu.com/file/cfb4</summary>
      
    
    
    
    
    <category term="ç§‘å¹»" scheme="https://amonxu.com/tags/%E7%A7%91%E5%B9%BB/"/>
    
    <category term="Jobot" scheme="https://amonxu.com/tags/Jobot/"/>
    
    <category term="èŒç”Ÿæœº" scheme="https://amonxu.com/tags/%E8%81%8C%E7%94%9F%E6%9C%BA/"/>
    
    <category term="çŸ­ç¯‡å°è¯´" scheme="https://amonxu.com/tags/%E7%9F%AD%E7%AF%87%E5%B0%8F%E8%AF%B4/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨ GitHub README ä¸­æ’å…¥è§†é¢‘ï¼ŸåŸæ¥è¿™ä¹ˆç®€å•</title>
    <link href="https://amonxu.com/2024/05/23/zh-CN/2024-05-23-How-to-embed-a-video-into-GitHub-README/"/>
    <id>https://amonxu.com/2024/05/23/zh-CN/2024-05-23-How-to-embed-a-video-into-GitHub-README/</id>
    <published>2024-05-23T10:23:22.000Z</published>
    <updated>2024-05-23T11:21:26.712Z</updated>
    
    <content type="html"><![CDATA[<p>å½“æˆ‘ä»¬å‘å¸ƒä¸€æ¬¾äº§å“æ—¶ï¼Œé€šå¸¸ä¼šåˆ¶ä½œä¸€ä¸ªæ¼”ç¤ºè§†é¢‘æ¥å±•ç¤ºæˆ‘ä»¬äº§å“çš„åŠŸèƒ½å’Œç‰¹æ€§ã€‚å¦‚ä»Šï¼Œå¾ˆå¤š GitHub ä»“åº“ä¹Ÿæ˜¯å¦‚æ­¤ã€‚<br>ä½†æ˜¯ï¼Œå¦‚ä½•åœ¨GitHub README ä¸­æ’å…¥è§†é¢‘å‘¢ï¼Ÿ</p><p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å°è¯•å°†è§†é¢‘æ–‡ä»¶æ·»åŠ åˆ°ä»£ç ä»“åº“ä¸­ï¼Œä½†ç”±äºå¹³å°çš„é™åˆ¶ï¼Œè§†é¢‘æ–‡ä»¶æ˜¾ç¤ºä¸ºURLã€‚æˆ‘ä»¬è¿˜å°è¯•ä½¿ç”¨ Markdown æˆ– HTML æ¥åµŒå…¥è§†é¢‘ï¼Œä½†æ ¹æœ¬ä¸èµ·ä½œç”¨ã€‚</p><p>å¥½æ¶ˆæ¯æ˜¯ï¼Œå¦‚ä»Šå°†æœ¬åœ°è§†é¢‘æ’å…¥åˆ° GitHub READMEä¸­ éå¸¸ç®€å•ï¼</p><p>åªéœ€å¦‚ä¸‹å‡ æ­¥å³å¯ï¼š</p><h1 id="1-åœ¨-GitHub-åœ¨çº¿ä»“åº“ä¸­ç¼–è¾‘-README-æ–‡ä»¶"><a href="#1-åœ¨-GitHub-åœ¨çº¿ä»“åº“ä¸­ç¼–è¾‘-README-æ–‡ä»¶" class="headerlink" title="1. åœ¨ GitHub åœ¨çº¿ä»“åº“ä¸­ç¼–è¾‘ README æ–‡ä»¶"></a>1. åœ¨ GitHub åœ¨çº¿ä»“åº“ä¸­ç¼–è¾‘ README æ–‡ä»¶</h1><p>ç¼–è¾‘é¡µé¢çš„é“¾æ¥ç±»ä¼¼ï¼š <code>https://github.com/xumeng/ai-careers/edit/master/README.md</code></p><p><img src="https://i0.wp.com/i.sstatic.net/8Cp7qcTK.png" alt="github readmeä¸­æ’å…¥è§†é¢‘"></p><h1 id="2-æŠŠæœ¬åœ°è§†é¢‘æ–‡ä»¶æ‹–åˆ°ç¼–è¾‘åŒºåŸŸå†…"><a href="#2-æŠŠæœ¬åœ°è§†é¢‘æ–‡ä»¶æ‹–åˆ°ç¼–è¾‘åŒºåŸŸå†…" class="headerlink" title="2. æŠŠæœ¬åœ°è§†é¢‘æ–‡ä»¶æ‹–åˆ°ç¼–è¾‘åŒºåŸŸå†…"></a>2. æŠŠæœ¬åœ°è§†é¢‘æ–‡ä»¶æ‹–åˆ°ç¼–è¾‘åŒºåŸŸå†…</h1><p>GitHub ä¼šè‡ªåŠ¨ä¸Šä¼ è§†é¢‘æ–‡ä»¶ï¼Œç„¶åå±•ç¤ºä¸€ä¸ªèµ„æºæ–‡ä»¶çš„é“¾æ¥åœ°å€ï¼Œç±»ä¼¼ï¼š <code>https://github.com/xumeng/ai-careers/assets/2187660/7362e4b8-6318-4cfc-af63-b8921455e434</code></p><p><img src="https://i0.wp.com/i.sstatic.net/EDbTWGOZ.png" alt="æŠŠè§†é¢‘æ’å…¥åˆ°github readmeä¸­"></p><h1 id="3-é¢„è§ˆæ£€æŸ¥æ•ˆæœï¼Œç„¶åæäº¤æ–‡ä»¶æ›´æ–°ï¼Œæå®šï¼"><a href="#3-é¢„è§ˆæ£€æŸ¥æ•ˆæœï¼Œç„¶åæäº¤æ–‡ä»¶æ›´æ–°ï¼Œæå®šï¼" class="headerlink" title="3. é¢„è§ˆæ£€æŸ¥æ•ˆæœï¼Œç„¶åæäº¤æ–‡ä»¶æ›´æ–°ï¼Œæå®šï¼"></a>3. é¢„è§ˆæ£€æŸ¥æ•ˆæœï¼Œç„¶åæäº¤æ–‡ä»¶æ›´æ–°ï¼Œæå®šï¼</h1><p><img src="https://i0.wp.com/i.sstatic.net/0l7Y2vCY.png" alt="èŒç”Ÿæœºjobotaiè‡ªåŠ¨ç”Ÿæˆæ‹›è˜èŒä½æè¿°"></p><p>GitHub README ç¤ºä¾‹: <a href="https://github.com/xumeng/ai-careers">https://github.com/xumeng/ai-careers</a></p><h1 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h1><p><a href="https://stackoverflow.com/a/78521560/3090339">https://stackoverflow.com/a/78521560/3090339</a></p><p><a href="https://amonxu.medium.com/how-to-embed-a-video-into-github-readme-so-easy-c298ca92d537">https://amonxu.medium.com/how-to-embed-a-video-into-github-readme-so-easy-c298ca92d537</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å½“æˆ‘ä»¬å‘å¸ƒä¸€æ¬¾äº§å“æ—¶ï¼Œé€šå¸¸ä¼šåˆ¶ä½œä¸€ä¸ªæ¼”ç¤ºè§†é¢‘æ¥å±•ç¤ºæˆ‘ä»¬äº§å“çš„åŠŸèƒ½å’Œç‰¹æ€§ã€‚å¦‚ä»Šï¼Œå¾ˆå¤š GitHub ä»“åº“ä¹Ÿæ˜¯å¦‚æ­¤ã€‚&lt;br&gt;ä½†æ˜¯ï¼Œå¦‚ä½•åœ¨GitHub README ä¸­æ’å…¥è§†é¢‘å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å°è¯•å°†è§†é¢‘æ–‡ä»¶æ·»åŠ åˆ°ä»£ç ä»“åº“ä¸­ï¼Œä½†ç”±äºå¹³å°çš„é™åˆ¶ï¼Œè§†é¢‘æ–‡ä»¶æ˜¾ç¤ºä¸ºURL</summary>
      
    
    
    
    
    <category term="GitHub" scheme="https://amonxu.com/tags/GitHub/"/>
    
    <category term="Documents" scheme="https://amonxu.com/tags/Documents/"/>
    
  </entry>
  
  <entry>
    <title>How to embed a video into GitHub-README? So easy!</title>
    <link href="https://amonxu.com/2024/05/23/en/2024-05-23-How-to-embed-a-video-into-GitHub-README/"/>
    <id>https://amonxu.com/2024/05/23/en/2024-05-23-How-to-embed-a-video-into-GitHub-README/</id>
    <published>2024-05-23T10:03:22.000Z</published>
    <updated>2024-05-23T11:21:23.202Z</updated>
    
    <content type="html"><![CDATA[<p>When we launch a product, we usually make a video to show our productâ€™s functions and features. We also do this for our GitHub repository now.</p><p>However, how can we embed a video into a GitHub README?</p><p>In the past, we tried to add a video file to the repository, but the video file showed as a URL given the limitations of the platform. We also tried using markdown or HTML to embed a video, but it did not work at all.</p><p>Good news: <strong>Embedding a local video into a GitHub README is very easy now!</strong></p><p>Just follow these steps: </p><h1 id="1-Edit-the-README-file-on-the-GitHub-online-repository"><a href="#1-Edit-the-README-file-on-the-GitHub-online-repository" class="headerlink" title="1. Edit the README file on the GitHub online repository"></a>1. Edit the README file on the GitHub online repository</h1><p>The edit page url likes <code>https://github.com/xumeng/ai-careers/edit/master/README.md</code></p><p><img src="https://i0.wp.com/i.sstatic.net/8Cp7qcTK.png" alt="embed a video into github readme file"></p><h1 id="2-Drag-the-local-video-file-to-the-edit-panel"><a href="#2-Drag-the-local-video-file-to-the-edit-panel" class="headerlink" title="2. Drag the local video file to the edit panel"></a>2. Drag the local video file to the edit panel</h1><p>GitHub will uploading the file automatically, then it will showing a video asset url likes <code>https://github.com/xumeng/ai-careers/assets/2187660/7362e4b8-6318-4cfc-af63-b8921455e434</code></p><p><img src="https://i0.wp.com/i.sstatic.net/EDbTWGOZ.png" alt="drag the video file into the github readme file"></p><h1 id="3-Preview-and-commit-the-changes-Weâ€™re-done"><a href="#3-Preview-and-commit-the-changes-Weâ€™re-done" class="headerlink" title="3. Preview and commit the changes, Weâ€™re done!"></a>3. Preview and commit the changes, Weâ€™re done!</h1><p><img src="https://i0.wp.com/i.sstatic.net/0l7Y2vCY.png" alt="generates job description by èŒç”Ÿæœºjobotai"></p><p>GitHub README Demo: <a href="https://github.com/xumeng/ai-careers">https://github.com/xumeng/ai-careers</a></p><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><p><a href="https://stackoverflow.com/a/78521560/3090339">https://stackoverflow.com/a/78521560/3090339</a></p><p><a href="https://amonxu.medium.com/how-to-embed-a-video-into-github-readme-so-easy-c298ca92d537">https://amonxu.medium.com/how-to-embed-a-video-into-github-readme-so-easy-c298ca92d537</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;When we launch a product, we usually make a video to show our productâ€™s functions and features. We also do this for our GitHub repository</summary>
      
    
    
    
    
    <category term="GitHub" scheme="https://amonxu.com/tags/GitHub/"/>
    
    <category term="Documents" scheme="https://amonxu.com/tags/Documents/"/>
    
  </entry>
  
  <entry>
    <title>åå¹´ç£¨ä¸€å‰‘ï¼Œä»Šæœæ›´é”ƒäº®ï¼šæŠŠ Hexo blog + hexo-theme-next åšå®¢å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬</title>
    <link href="https://amonxu.com/2024/05/14/zh-CN/2024-05-14-Hexo-Blog-Upgrade/"/>
    <id>https://amonxu.com/2024/05/14/zh-CN/2024-05-14-Hexo-Blog-Upgrade/</id>
    <published>2024-05-14T15:00:55.000Z</published>
    <updated>2024-05-16T07:54:50.815Z</updated>
    
    <content type="html"><![CDATA[<hr><p><img src="https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA==" alt="hexo blog upgrade"></p><center><font size=8>ç£¨å‰‘</font></center><p>ç°åœ¨å¾ˆæœ‰æ„æ€ï¼Œå‡¡äº‹è®²ç©¶ä¸ªæ•æ·ã€è¿­ä»£ã€å¿«ã€‚ç¨å¾®ä¸€ä¸ªä¸ç•™ç¥ï¼Œå°±ä¼šå‘ç°è‡ªå·±è¢«æ—¶ä»£è¿œè¿œç”©åœ¨åé¢ã€‚</p><p>æˆ‘çš„ Blog æ‰˜ç®¡åœ¨ GitHub Pages + Hexoï¼Œæœ‰æ®µæ—¶é—´æ²¡æ›´æ–° Blog ç¨‹åºäº†ã€‚è¿™ä¸¤å¤©å¿ƒè¡€æ¥æ½®æƒ³è¯•ä¸‹æ›´æ–°ï¼Œå‘ç°ç¨‹åºè½åå¥½å‡ ä¸ªå¤§ç‰ˆæœ¬ï¼ˆå½“å‰ä½¿ç”¨ 3.xï¼Œæœ€æ–°ç‰ˆæœ¬ 7.xï¼‰ã€‚</p><p>ä»Šå¤©å¤´é“ï¼Œå¤‡ä»½ Blog åæœæ–­ä¸Šæ‰‹å¼€å¹²ï¼Œå…ˆæŠ¥ä¸‹æ€»ç»“ï¼š</p><p><strong>å¥½æ¶ˆæ¯ï¼šå‡çº§è¿‡ç¨‹æ„å¤–çš„é¡ºåˆ©</strong></p><p><strong>åæ¶ˆæ¯ï¼šå‡çº§åæ²¡æ„Ÿè§‰åˆ°æ˜æ˜¾å˜åŒ–</strong> ï¼ˆå¯èƒ½æ˜¯æˆ‘æœŸæœ›å¤ªé«˜äº†ğŸ¤”ï¸ï¼‰</p><blockquote><p>å‡çº§åçš„ç¨‹åºç‰ˆæœ¬ä¿¡æ¯ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â¯ hexo version</span><br><span class="line">INFO  Validating config</span><br><span class="line">hexo: 7.2.0</span><br><span class="line">hexo-cli: 4.3.2</span><br><span class="line">os: darwin 22.4.0 13.3.1</span><br></pre></td></tr></table></figure><hr><center><font size=10>åå¹´ </font></center><p>Blog æœ€æ—©å¤§æ¦‚æ˜¯ 2011ã€2012 å¹´å¤§å­¦æœŸé—´éšä¾¿ä¹°äº†ä¸ªåŸŸåï¼Œç”¨ WordPress æ­å»ºã€‚<a href="https://amonxu.com/2012/05/21/zh-CN/2012-05-21-hello-world/">https://amonxu.com/2012/05/21/zh-CN/2012-05-21-hello-world/</a></p><p>2013 å¹´æ¥è§¦äº† GitHub Pagesï¼Œè§‰å¾— WordPress å®åœ¨å¤ªä¸ Geek äº†ï¼Œé©¬ä¸ŠæŠŠ Blog è¿ç§»åˆ° GitHub Pages + Jekyllã€‚ <a href="https://amonxu.com/2013/04/18/zh-CN/2013-04-18-wordpress-to-github/">https://amonxu.com/2013/04/18/zh-CN/2013-04-18-wordpress-to-github/</a></p><p>2015 å¹´æ—¶ï¼Œçœ‹åˆ° Hexo çš„å‡ ä¸ªä¸»é¢˜å¾ˆæœ‰æ„æ€ï¼Œç¬é—´åˆæ„Ÿè§‰ Jekyll ä¸å¤Ÿé…·äº†ï¼Œç”¨ Hexo + Node.js æ›¿ä»£äº† Jekyll + Rubyã€‚<a href="https://amonxu.com/2013/05/23/zh-CN/2013-05-22-hello--my-blog/">https://amonxu.com/2013/05/23/zh-CN/2013-05-22-hello--my-blog/</a> ã€‚åˆæ¢äº†ç°åœ¨è¿™ä¸ªåŸŸå <a href="https://amonxu.com/">https://amonxu.com</a> </p><p>åé¢é™¤äº†æ›´æ–°æ–‡ç« ï¼Œæ¢è¿‡å‡ ä¸ªä¸»é¢˜ï¼Œæš‚æ—¶æ²¡å†ç»§ç»­æŠ˜è…¾ Blogï¼Œç›´åˆ°ä»Šå¤©ã€‚</p><p>æŠ˜è…¾æ—¶çœ‹åˆ°å¾ˆå¤šç¨‹åºåœæ­¢ç»´æŠ¤ï¼Œæ›´æ–°æ—¶é—´åŠ¨ä¸åŠ¨å°±æ˜¯ 8, 9 years agoï¼Œæ„Ÿå¹å…‰é˜´æ˜“é€ã€‚</p><blockquote><p>ä½¿ç”¨è¿‡çš„çš„Hexoä¸»é¢˜åˆ—è¡¨</p></blockquote><p><img src="https://img.amonxu.com/file/ba0e37a376c9077f946aa.png" alt="amonxu.com hexo theme list"></p><blockquote><p>GitHub Pages éƒ¨ç½²è®°å½•</p></blockquote><p><img src="https://img.amonxu.com/file/31f1397d4490036514137.png" alt="amonxu.com github pages deployments history"></p><p>å‡çº§å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://www.imczw.com/post/tech/hexo5-next8-updated.html">https://www.imczw.com/post/tech/hexo5-next8-updated.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?q=80&amp;w=2940&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3</summary>
      
    
    
    
    
    <category term="Hexo" scheme="https://amonxu.com/tags/Hexo/"/>
    
    <category term="Blog" scheme="https://amonxu.com/tags/Blog/"/>
    
    <category term="2024" scheme="https://amonxu.com/tags/2024/"/>
    
    <category term="next" scheme="https://amonxu.com/tags/next/"/>
    
    <category term="hexo-theme-next" scheme="https://amonxu.com/tags/hexo-theme-next/"/>
    
    <category term="upgrade" scheme="https://amonxu.com/tags/upgrade/"/>
    
  </entry>
  
  <entry>
    <title>Simply way to support multiple languages i18n in Next.js 14 (Based on App Router)</title>
    <link href="https://amonxu.com/2024/04/10/en/2024-04-10-Next-i18n-Best-practices-based-app-router/"/>
    <id>https://amonxu.com/2024/04/10/en/2024-04-10-Next-i18n-Best-practices-based-app-router/</id>
    <published>2024-04-10T03:03:22.000Z</published>
    <updated>2024-04-28T03:43:01.211Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction:"></a>Introduction:</h2><p>This post introduces the implementation of i18n internationalization multi-language feature in Next.js 14 (based on App Router), and takes into consideration actual scenarios to optimize and perfect the feature step-by-step. By reading this post, you will immediately get how to implement i18n in Next.js.</p><p><img src="https://images.unsplash.com/photo-1502945015378-0e284ca1a5be?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA==" alt="hero"></p><h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>In an era where the Internet world is becoming increasingly flattening, the importance of multi-language products is growing. Fortunately, Next.js allows us to quickly support multi-language with simple configurations and code. However, when we search for how Next.js supports multi-languages on the Internet, we might find a variety of implementations, jumbled information, and excessively clever solutions. Then we become confused and start to question: Whatâ€™s the issue here?</p><p>Today, letâ€™s implement multi-language from 0 to 1 in Next.js and unravel the mystery of multi-language.</p><p>We can refer to the i18n introduction in the Next.js official documentation here: <a href="https://nextjs.org/docs/app/building-your-application/routing/internationalization">https://nextjs.org/docs/app/building-your-application/routing/internationalization</a>, which is quite clear and detailed. This article will be based on this documentation.</p><p>Before we begin, letâ€™s take a look at the final running effect: <a href="https://next-i18n-demo-two.vercel.app/">https://next-i18n-demo-two.vercel.app/</a></p><h2 id="Ready-to-work"><a href="#Ready-to-work" class="headerlink" title="Ready to work"></a>Ready to work</h2><p>First, We create a Next.js app,</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app@latest</span><br></pre></td></tr></table></figure><p>Plese select <code>App Router</code>, I am using  <code>TypeScript</code> here.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â¯ npx create-next-app@latest</span><br><span class="line">âœ” What is your project named? â€¦ `next-i18n-demo`</span><br><span class="line">âœ” Would you like to use TypeScript? â€¦ No / `Yes`</span><br><span class="line">âœ” Would you like to use ESLint? â€¦ No / `Yes`</span><br><span class="line">âœ” Would you like to use Tailwind CSS? â€¦ No / `Yes</span><br><span class="line">âœ” Would you like to use `src/` directory? â€¦ No / `Yes`</span><br><span class="line">âœ” Would you like to use App Router? (recommended) â€¦ No / `Yes`</span><br><span class="line">âœ” Would you like to customize the default import <span class="built_in">alias</span> (@/*)? â€¦ `No` / Yes</span><br></pre></td></tr></table></figure><p>Run locally,</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>Open <a href="http://localhost:3000/">http://localhost:3000</a> and you will see that it is running okay.</p><h2 id="Internationalization-introduction"><a href="#Internationalization-introduction" class="headerlink" title="Internationalization introduction"></a>Internationalization introduction</h2><p>Before we start it, letâ€™s briefly introduce about internationalization. <strong>internationalization</strong>, aka <strong>i18n</strong>, this means supporting multiple languages, cultures, and customs in products, mainly including language, time, currency symbols, etc. This article will focus only on the language part. </p><p>In terms of internationalization, a common approach is for a website to default to a certain languageâ€™s official site (usually English), and to support the selection of language or region, allowing for a switch to different language versions of the site.</p><p>Specifically, some websites use a language abbreviation as a prefix, such as <code>en.wikipedia.org</code>, <code>zh.wikipedia.org</code>; some use it as a path suffix, such as <code>aws.amazon.com/cn</code>, <code>aws.amazon.com/jp</code>, and others distinguish based on the country or region domain name, such as <code>apple.cn</code>, <code>apple.jp</code>. </p><p>Among these, <code>en, zh, cn, jp</code>, etc., are language codes, which can vary slightly in different versions. You can refer to the reference materials at the end of the article for specifics. </p><p>In this articleâ€™s particular case, the <strong>ISO_3166</strong> codes <strong><code>en</code></strong> and <strong><code>zh</code></strong> will be used to represent English and Chinese respectively.</p><h2 id="Begin-to-configure-Multi-Languages"><a href="#Begin-to-configure-Multi-Languages" class="headerlink" title="Begin to configure Multi-Languages"></a>Begin to configure Multi-Languages</h2><p>The original file structure of the project was:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ next.svg</span><br><span class="line">â”‚Â Â  â””â”€â”€ vercel.svg</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â””â”€â”€ app</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ globals.css</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ layout.tsx</span><br><span class="line">â”‚Â Â      â””â”€â”€ page.tsx</span><br><span class="line">â”œâ”€â”€ tailwind.config.ts</span><br><span class="line">â””â”€â”€ tsconfig.json</span><br></pre></td></tr></table></figure><p>We create a new folder named <code>[lang]</code> in the <code>app</code> directory, then move <code>laytout.tsx</code> and <code>page.tsx</code> from the <code>app</code> directory to <code>[locales]</code>.</p><p>The file structure after moving is:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ postcss.config.mjs</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ next.svg</span><br><span class="line">â”‚Â Â  â””â”€â”€ vercel.svg</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â””â”€â”€ app</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ [lang]</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ layout.tsx</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ page.tsx</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚Â Â      â””â”€â”€ globals.css</span><br><span class="line">â”œâ”€â”€ tailwind.config.ts</span><br><span class="line">â””â”€â”€ tsconfig.json</span><br></pre></td></tr></table></figure><blockquote><p>Tips: </p><p>Please modify the reference position of globals.css in layout.tsx.</p></blockquote><p>Next, we define json resource files for different languages, which you can put in your preferred file directory. I put it in <code>public/dictionaries</code>. The file format is as follows:</p><p><strong>en.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Next.js i18n Demo&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;How to implement i18n with Next.js (based on App Router)&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;home&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello, Next.js i18n&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;This is a demo of Next.js i18n&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>zh.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Next.js i18n ç¤ºä¾‹&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ææ‡‚ Next.js å®ç° i18n å›½é™…åŒ–å¤šè¯­è¨€(åŸºäºApp Router)&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;home&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ å¥½, Next.js i18n&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ª Next.js i18n ç¤ºä¾‹&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Then, we create a file to load the multi-language resource files and get the corresponding language text.</p><p>Add <code>dictionaries.js</code> in the <code>app/[lang]</code> directory. Make sure the file directory and file name are correct and match.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;server-only&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> dictionaries = &#123;</span><br><span class="line">  <span class="attr">en</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dictionaries/en.json&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="variable language_">module</span></span>) =&gt;</span> <span class="variable language_">module</span>.<span class="property">default</span>),</span><br><span class="line">  <span class="attr">zh</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dictionaries/zh.json&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="variable language_">module</span></span>) =&gt;</span> <span class="variable language_">module</span>.<span class="property">default</span>),</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getDictionary</span> = <span class="keyword">async</span> (<span class="params">locale</span>) =&gt; dictionaries[locale]()</span><br></pre></td></tr></table></figure><h2 id="Using-Multi-Languages"><a href="#Using-Multi-Languages" class="headerlink" title="Using Multi-Languages"></a>Using Multi-Languages</h2><p>We use the multi-language feature on the <code>pages.tsx</code> page.</p><p>First, add the <code>lang</code> parameter for the function, add  <code>async</code>  for the function,</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params">&#123; params: &#123; lang &#125; &#125;: &#123; params: &#123; lang: <span class="built_in">string</span> &#125; &#125;</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Use it on the page, add the multi-language fuction call,</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> t = <span class="keyword">await</span> <span class="title function_">getDictionary</span>(lang);</span><br></pre></td></tr></table></figure><p>For convenience, I clean up the default code on <code>page.tsx</code> and only retain the text display.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;main className=<span class="string">&quot;flex min-h-screen flex-col items-center justify-between p-24&quot;</span>&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;fixed left-0 top-0 flex w-full justify-center border-b border-gray-300 bg-gradient-to-b from-zinc-200 pb-6 pt-8 backdrop-blur-2xl dark:border-neutral-800 dark:bg-zinc-800/30 dark:from-inherit lg:static lg:w-auto  lg:rounded-xl lg:border lg:bg-gray-200 lg:p-4 lg:dark:bg-zinc-800/30&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           &#123;t.home.title&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">      &#123;t.<span class="property">home</span>.<span class="property">desc</span>&#125;</span><br><span class="line">&lt;/main&gt;</span><br></pre></td></tr></table></figure><p>Restart the program or wait for the program to hot update successfully, open different language pages <a href="http://localhost:3000/en">http://localhost:3000/en</a> <a href="http://localhost:3000/zh">http://localhost:3000/zh</a> to check the effect.</p><h2 id="Setting-the-Default-Language"><a href="#Setting-the-Default-Language" class="headerlink" title="Setting the Default Language"></a>Setting the Default Language</h2><p>It looks pretty good, but careful friends will find that opening <a href="http://localhost:3000/">http://localhost:3000</a> will result in a 404 error. To solve this problem, we need to set a default language when no language is selected.</p><p>For this, we can create a <code>middleware.ts</code> in the <code>src</code> directory, and then copy the code from the documentation.</p><p>The core logic is simple:</p><p><strong>Check whether there is a certain language identifier in URLâ€™s <code>pathname</code>. If so, return directly. Otherwise, get the appropriate language and redirect the URL to <code>/$&#123;locale&#125;$&#123;pathname&#125;</code></strong></p><p>The focus is on the <code>getLocale</code> function. We need to specify the suitable language. For now, letâ€™s deal with this simply: use the default <code>defaultLocale = &quot;en&quot;</code> .</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextRequest</span>, <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&quot;next/server&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> locales = [<span class="string">&quot;en&quot;</span>, <span class="string">&quot;zh&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> defaultLocale = <span class="string">&quot;en&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the preferred locale, similar to the above or using a library</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getLocale</span>(<span class="params">request: NextRequest</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> defaultLocale;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request: NextRequest</span>) &#123;</span><br><span class="line">  <span class="comment">// Check if there is any supported locale in the pathname</span></span><br><span class="line">  <span class="keyword">const</span> &#123; pathname &#125; = request.<span class="property">nextUrl</span>;</span><br><span class="line">  <span class="keyword">const</span> pathnameHasLocale = locales.<span class="title function_">some</span>(</span><br><span class="line">    <span class="function">(<span class="params">locale</span>) =&gt;</span> pathname.<span class="title function_">startsWith</span>(<span class="string">`/<span class="subst">$&#123;locale&#125;</span>/`</span>) || pathname === <span class="string">`/<span class="subst">$&#123;locale&#125;</span>`</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (pathnameHasLocale) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Redirect if there is no locale</span></span><br><span class="line">  <span class="keyword">const</span> locale = <span class="title function_">getLocale</span>(request);</span><br><span class="line">  request.<span class="property">nextUrl</span>.<span class="property">pathname</span> = <span class="string">`/<span class="subst">$&#123;locale&#125;</span><span class="subst">$&#123;pathname&#125;</span>`</span>;</span><br><span class="line">  <span class="comment">// e.g. incoming request is /products</span></span><br><span class="line">  <span class="comment">// The new URL is now /en-US/products</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(request.<span class="property">nextUrl</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="attr">matcher</span>: [</span><br><span class="line">    <span class="comment">// Skip all internal paths (_next)</span></span><br><span class="line">    <span class="string">&quot;/((?!_next).*)&quot;</span>,</span><br><span class="line">    <span class="comment">// Optional: only run on root (/) URL</span></span><br><span class="line">    <span class="comment">// &#x27;/&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>After the program updates, we open <a href="http://localhost:3000/">http://localhost:3000/</a> and see that it will automatically redirect to the default language page.</p><h2 id="Optimization-of-Getting-the-Default-Language"><a href="#Optimization-of-Getting-the-Default-Language" class="headerlink" title="Optimization of Getting the Default Language"></a>Optimization of Getting the Default Language</h2><p>In the previous step, while get the default language, we treated it simply as <code>defaultLocale = &quot;en&quot;</code>. A more graceful way is: <strong>Set the default language based on the userâ€™s system or browser language.</strong></p><p>We can achieve this by getting the <code>Accept-Language</code> field from the browserâ€™s HTTP headers. The data format is approximately as follows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">English:</span><br><span class="line">accept-language: en-US,en;q=0.5</span><br><span class="line">Chinese:</span><br><span class="line">accept-language: zh-CN,zh-Hans;q=0.9</span><br></pre></td></tr></table></figure><p>We update <code>middleware</code> as follows:</p><ol><li><strong>Get the <code>Accept-Language</code> from the HTTP headers. If itâ€™s empty, then return the default language.</strong></li><li><strong>Parse the language list in <code>Accept-Language</code> and match to get the corresponding language based on the configured language list. (If there is no match, return the default language)</strong></li></ol><p>Install dependencies <code>@formatjs/intl-localematcher</code>, <code>negotiator</code>, <code>@types/negotiator</code>, and implement the following logic:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getLocale</span>(<span class="params">request: NextRequest</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> acceptLang = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;Accept-Language&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!acceptLang) <span class="keyword">return</span> defaultLocale;</span><br><span class="line">  <span class="keyword">const</span> headers = &#123; <span class="string">&quot;accept-language&quot;</span>: acceptLang &#125;;</span><br><span class="line">  <span class="keyword">const</span> languages = <span class="keyword">new</span> <span class="title class_">Negotiator</span>(&#123; headers &#125;).<span class="title function_">languages</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">match</span>(languages, locales, defaultLocale);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>By changing the system language, open <a href="http://localhost:3000/">http://localhost:3000</a> and it will automatically redirect to the page with the same system language. Test successfully.</p><h2 id="Other-Handling-of-Multi-Language"><a href="#Other-Handling-of-Multi-Language" class="headerlink" title="Other Handling of Multi-Language"></a>Other Handling of Multi-Language</h2><h4 id="Storing-the-Language"><a href="#Storing-the-Language" class="headerlink" title="Storing the Language"></a>Storing the Language</h4><p>Going a step further, we can store the userâ€™s web page language in the cookies and use it on the next visit:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Get Cookie </span></span><br><span class="line"><span class="keyword">if</span> (request.<span class="property">cookies</span>.<span class="title function_">has</span>(cookieName)) &#123;</span><br><span class="line">  <span class="keyword">return</span> request.<span class="property">cookies</span>.<span class="title function_">get</span>(cookieName)!.<span class="property">value</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set Cookie</span></span><br><span class="line">response.<span class="property">cookies</span>.<span class="title function_">set</span>(cookieName, locale);</span><br></pre></td></tr></table></figure><h4 id="Web-Metadata-Page-Title-Descriptions"><a href="#Web-Metadata-Page-Title-Descriptions" class="headerlink" title="Web Metadata(Page Title&#x2F;Descriptions..)"></a>Web Metadata(Page Title&#x2F;Descriptions..)</h4><p>When using i18n in web page metadata, add the following code to <code>page.tsx</code>:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">generateMetadata</span>(<span class="params">&#123; params: &#123; lang &#125; &#125; : &#123; params: &#123; lang: <span class="built_in">string</span> &#125; &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> t = <span class="keyword">await</span> <span class="title function_">getDictionary</span>(lang);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: t.<span class="property">page</span>.<span class="property">title</span>,</span><br><span class="line">    <span class="attr">description</span>: t.<span class="property">page</span>.<span class="property">desc</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="SSG-Static-Generation"><a href="#SSG-Static-Generation" class="headerlink" title="SSG(Static Generation)"></a>SSG(Static Generation)</h4><p>When handling i18n in SSG, the code in <code>layout.tsx</code> is as follows:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">LangParams</span> &#123;</span><br><span class="line">  <span class="attr">lang</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">generateStaticParams</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [&#123; <span class="attr">lang</span>: <span class="string">&quot;en&quot;</span> &#125;, &#123; <span class="attr">lang</span>: <span class="string">&quot;zh&quot;</span> &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  children,</span></span><br><span class="line"><span class="params">  params,</span></span><br><span class="line"><span class="params">&#125;: Readonly&lt;&#123;</span></span><br><span class="line"><span class="params">  children: React.ReactNode;</span></span><br><span class="line"><span class="params">  params: LangParams;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&#123;params.lang&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Language-Switchï¼ˆLanguage-Switcher-or-Linksï¼‰"><a href="#Language-Switchï¼ˆLanguage-Switcher-or-Linksï¼‰" class="headerlink" title="Language Switchï¼ˆLanguage Switcher or Linksï¼‰"></a>Language Switchï¼ˆLanguage Switcher or Linksï¼‰</h4><p>You can add a language swicher (like a drop-down menu) or some links.</p><p>For example,</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=<span class="string">&quot;space-x-2&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&quot;/en&quot;</span>&gt;</span>English<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>|<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&quot;/zh&quot;</span>&gt;</span>Chinese<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2><p>Through the learning of the above steps, we initially familiarize and practice using multi-language in Next.js. A journey of thousand miles begins with a single step. The work of i18n is not limited to these, and of course, other areas need improvement which Iâ€™d leave to you, the reader.</p><p>Finally, here is the complete code of  <code>middleware.ts</code> :</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Negotiator</span> <span class="keyword">from</span> <span class="string">&quot;negotiator&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; match &#125; <span class="keyword">from</span> <span class="string">&quot;@formatjs/intl-localematcher&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextRequest</span>, <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&quot;next/server&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> locales = [<span class="string">&quot;en&quot;</span>, <span class="string">&quot;zh&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> defaultLocale = <span class="string">&quot;zh&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> cookieName = <span class="string">&quot;i18nlang&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the preferred locale, similar to the above or using a library</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getLocale</span>(<span class="params">request: NextRequest</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="comment">// Get locale from cookie</span></span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">cookies</span>.<span class="title function_">has</span>(cookieName))</span><br><span class="line">    <span class="keyword">return</span> request.<span class="property">cookies</span>.<span class="title function_">get</span>(cookieName)!.<span class="property">value</span>;</span><br><span class="line">  <span class="comment">// Get accept language from HTTP headers</span></span><br><span class="line">  <span class="keyword">const</span> acceptLang = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;Accept-Language&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!acceptLang) <span class="keyword">return</span> defaultLocale;</span><br><span class="line">  <span class="comment">// Get match locale</span></span><br><span class="line">  <span class="keyword">const</span> headers = &#123; <span class="string">&quot;accept-language&quot;</span>: acceptLang &#125;;</span><br><span class="line">  <span class="keyword">const</span> languages = <span class="keyword">new</span> <span class="title class_">Negotiator</span>(&#123; headers &#125;).<span class="title function_">languages</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">match</span>(languages, locales, defaultLocale);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request: NextRequest</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">nextUrl</span>.<span class="property">pathname</span>.<span class="title function_">startsWith</span>(<span class="string">&quot;/_next&quot;</span>)) <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Check if there is any supported locale in the pathname</span></span><br><span class="line">  <span class="keyword">const</span> &#123; pathname &#125; = request.<span class="property">nextUrl</span>;</span><br><span class="line">  <span class="keyword">const</span> pathnameHasLocale = locales.<span class="title function_">some</span>(</span><br><span class="line">    <span class="function">(<span class="params">locale</span>) =&gt;</span> pathname.<span class="title function_">startsWith</span>(<span class="string">`/<span class="subst">$&#123;locale&#125;</span>/`</span>) || pathname === <span class="string">`/<span class="subst">$&#123;locale&#125;</span>`</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (pathnameHasLocale) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Redirect if there is no locale</span></span><br><span class="line">  <span class="keyword">const</span> locale = <span class="title function_">getLocale</span>(request);</span><br><span class="line">  request.<span class="property">nextUrl</span>.<span class="property">pathname</span> = <span class="string">`/<span class="subst">$&#123;locale&#125;</span><span class="subst">$&#123;pathname&#125;</span>`</span>;</span><br><span class="line">  <span class="comment">// e.g. incoming request is /products</span></span><br><span class="line">  <span class="comment">// The new URL is now /en-US/products</span></span><br><span class="line">  <span class="keyword">const</span> response = <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(request.<span class="property">nextUrl</span>);</span><br><span class="line">  <span class="comment">// Set locale to cookie</span></span><br><span class="line">  response.<span class="property">cookies</span>.<span class="title function_">set</span>(cookieName, locale);</span><br><span class="line">  <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="attr">matcher</span>: [</span><br><span class="line">    <span class="comment">// Skip all internal paths (_next)</span></span><br><span class="line">    <span class="string">&quot;/((?!_next).*)&quot;</span>,</span><br><span class="line">    <span class="comment">// Optional: only run on root (/) URL</span></span><br><span class="line">    <span class="comment">// &#x27;/&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>You can get the full code from  <a href="https://github.com/xumeng/next-i18n-demo">https://github.com/xumeng/next-i18n-demo</a> .</p><p>The finally running demo: <a href="https://next-i18n-demo-two.vercel.app/">https://next-i18n-demo-two.vercel.app/</a></p><hr><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h2><p><a href="https://nextjs.org/docs/app/building-your-application/routing/internationalization">https://nextjs.org/docs/app/building-your-application/routing/internationalization</a></p><p><a href="https://en.wikipedia.org/wiki/ISO_3166">https://en.wikipedia.org/wiki/ISO_3166</a></p><p><a href="https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes">https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes</a></p><p><a href="https://en.wikipedia.org/wiki/IETF_language_tag">https://en.wikipedia.org/wiki/IETF_language_tag</a></p><p><a href="https://www.alchemysoftware.com/livedocs/ezscript/Topics/Catalyst/Language.htm">https://www.alchemysoftware.com/livedocs/ezscript/Topics/Catalyst/Language.htm</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction:&quot;&gt;&lt;/a&gt;Introduction:&lt;/h2&gt;&lt;p&gt;This post introduces the imp</summary>
      
    
    
    
    
    <category term="Next.js" scheme="https://amonxu.com/tags/Next-js/"/>
    
    <category term="React" scheme="https://amonxu.com/tags/React/"/>
    
    <category term="i18n" scheme="https://amonxu.com/tags/i18n/"/>
    
    <category term="internationalization" scheme="https://amonxu.com/tags/internationalization/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ç¯‡æ–‡ç« å­¦ä¼š Next.js å®ç° i18n å›½é™…åŒ–å¤šè¯­è¨€(åŸºäºApp Router)</title>
    <link href="https://amonxu.com/2024/04/10/zh-CN/2024-04-10-Next-i18n-Best-practices-based-app-router/"/>
    <id>https://amonxu.com/2024/04/10/zh-CN/2024-04-10-Next-i18n-Best-practices-based-app-router/</id>
    <published>2024-04-10T03:03:22.000Z</published>
    <updated>2024-04-25T04:22:36.970Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ–‡ç« å¯¼è¯»ï¼š"><a href="#æ–‡ç« å¯¼è¯»ï¼š" class="headerlink" title="æ–‡ç« å¯¼è¯»ï¼š"></a>æ–‡ç« å¯¼è¯»ï¼š</h2><p>æœ¬æ–‡ä»‹ç»äº†åœ¨ Next.js 14 (åŸºäºApp Router) ä¸­å®ç° i18n å›½é™…åŒ–å¤šè¯­è¨€åŠŸèƒ½ï¼Œå¹¶è€ƒè™‘åœ¨çœŸå®çš„åœºæ™¯ä¸­ï¼Œä¸€æ­¥æ­¥ä¼˜åŒ–å°†åŠŸèƒ½å®Œå–„ã€‚é€šè¿‡é˜…è¯»å®Œæœ¬æ–‡ï¼Œä½ å°†ç«‹å³æŒæ¡å¦‚ä½•åœ¨ Next.js ä¸­å®ç° i18nã€‚</p><p><img src="https://images.unsplash.com/photo-1502945015378-0e284ca1a5be?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA==" alt="hero"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨äº’è”ç½‘ä¸–ç•Œè¶Šæ¥è¶Šæ‰å¹³åŒ–çš„æ—¶ä»£ï¼Œäº§å“çš„å¤šè¯­è¨€æ˜¾å¾—è¶Šæ¥è¶Šé‡è¦ã€‚å¹¸è¿çš„åœ¨ Next.js ä¸­é€šè¿‡ç®€å•çš„é…ç½®å’Œä»£ç å³å¯å¿«é€Ÿæ”¯æŒå¤šè¯­è¨€ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨äº’è”ç½‘ä¸Šæœç´¢ Next.js å¦‚ä½•æ”¯æŒå¤šè¯­è¨€æ—¶ï¼Œå¯èƒ½ä¼šçœ‹åˆ°å„ç§å®ç°æ–¹å¼ã€é±¼é¾™æ··æ‚å’Œå¥‡æŠ€æ·«å·§çš„æ–¹æ¡ˆï¼Œäºæ˜¯æˆ‘ä»¬ä¸€å¤´é›¾æ°´ï¼Œä¸ç¦æ€€ç–‘äººç”Ÿï¼šåˆ°åº•å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Ÿ</p><p>ä»Šå¤©ï¼Œè®©æˆ‘ä»¬ä» 0 åˆ° 1 åœ¨ Next.js ä¸­å®ç°ä¸€ä¸ªå¤šè¯­è¨€ï¼Œæ­å¼€å¤šè¯­è¨€çš„ç¥ç§˜é¢çº±ã€‚</p><p>æˆ‘ä»¬æŸ¥çœ‹ Next.js å®˜æ–¹æ–‡æ¡£ä¸­çš„ i18n ä»‹ç»ï¼Œ <a href="https://nextjs.org/docs/app/building-your-application/routing/internationalization%EF%BC%8C%E6%AF%94%E8%BE%83%E6%B8%85%E6%99%B0%E8%AF%A6%E7%BB%86%E4%BA%86%EF%BC%8C%E6%9C%AC%E6%96%87%E4%B9%9F%E5%B0%86%E5%9F%BA%E4%BA%8E%E6%AD%A4%E7%AF%87%E6%96%87%E6%A1%A3%E5%88%B6%E4%BD%9C%E3%80%82">https://nextjs.org/docs/app/building-your-application/routing/internationalizationï¼Œæ¯”è¾ƒæ¸…æ™°è¯¦ç»†äº†ï¼Œæœ¬æ–‡ä¹Ÿå°†åŸºäºæ­¤ç¯‡æ–‡æ¡£åˆ¶ä½œã€‚</a></p><p>å¼€å§‹ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹æœ€ç»ˆè¿è¡Œæ•ˆæœï¼š<a href="https://next-i18n-demo-two.vercel.app/">https://next-i18n-demo-two.vercel.app/</a></p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ª Next.js appï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app@latest</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„é€‰æ‹© <code>App Router</code>ï¼Œæ­¤å¤„æˆ‘ä½¿ç”¨çš„æ˜¯ <code>TypeScript</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â¯ npx create-next-app@latest</span><br><span class="line">âœ” What is your project named? â€¦ `next-i18n-demo`</span><br><span class="line">âœ” Would you like to use TypeScript? â€¦ No / `Yes`</span><br><span class="line">âœ” Would you like to use ESLint? â€¦ No / `Yes`</span><br><span class="line">âœ” Would you like to use Tailwind CSS? â€¦ No / `Yes</span><br><span class="line">âœ” Would you like to use `src/` directory? â€¦ No / `Yes`</span><br><span class="line">âœ” Would you like to use App Router? (recommended) â€¦ No / `Yes`</span><br><span class="line">âœ” Would you like to customize the default import <span class="built_in">alias</span> (@/*)? â€¦ `No` / Yes</span><br></pre></td></tr></table></figure><p>æœ¬åœ°å¯åŠ¨ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ <a href="http://localhost:3000/">http://localhost:3000</a> çœ‹åˆ°ç¨‹åºè¿è¡Œæ­£å¸¸ã€‚</p><h2 id="å›½é™…åŒ–ä»‹ç»"><a href="#å›½é™…åŒ–ä»‹ç»" class="headerlink" title="å›½é™…åŒ–ä»‹ç»"></a>å›½é™…åŒ–ä»‹ç»</h2><p>åœ¨æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸€ä¸‹å›½é™…åŒ–ï¼Œå›½é™…åŒ– <strong>internationalization</strong>ï¼Œç®€ç§° <strong>i18n</strong>ï¼Œä¹Ÿå³åœ¨äº§å“ä¸­æ”¯æŒå¤šå›½è¯­è¨€æ–‡åŒ–å’Œç¯å¢ƒé£ä¿—ï¼Œä¸»è¦åŒ…æ‹¬è¯­è¨€&#x2F;æ—¶é—´&#x2F;è´§å¸ç¬¦å·ç­‰ã€‚è¿™ç¯‡æ–‡ç« ä¸­å°†åªä¸“æ³¨äºè¯­è¨€éƒ¨åˆ†ã€‚</p><p>åœ¨å›½é™…åŒ–çš„å…·ä½“å‘ˆç°ä¸Šï¼Œå¸¸è§çš„æ–¹å¼æ˜¯ç½‘ç«™é»˜è®¤è¿›å…¥æŸä¸ªè¯­è¨€çš„å®˜ç½‘ï¼ˆé€šå¸¸æ˜¯è‹±æ–‡ï¼‰ï¼Œå¹¶æ”¯æŒé€‰æ‹©è¯­è¨€æˆ–åœ°åŒºï¼Œè¿›è¡Œåˆ‡æ¢ç½‘ç«™çš„ä¸åŒè¯­è¨€ç‰ˆæœ¬ã€‚</p><p>å…·ä½“å®ç°æ–¹å¼ä¸Šï¼Œæœ‰çš„ç½‘ç«™ä»¥è¯­è¨€ç®€ç§°ä¸ºå‰ç¼€ï¼Œå¦‚ <code>en.wikipedia.org</code>, <code>zh.wikipedia.org</code>ï¼›æœ‰çš„ç½‘ç«™ä»¥è¯­è¨€ç®€ç§°ä½œä¸ºè·¯å¾„åç¼€ï¼Œå¦‚ <code>aws.amazon.com/cn</code>ï¼Œ <code>aws.amazon.com/jp</code>ï¼Œä¹Ÿæœ‰ä»¥å›½å®¶åœ°åŒºåŸŸåä¸ºåŒºåˆ†çš„ï¼Œå¦‚ä»¥å‰çš„ <code>apple.cn</code>, <code>apple.jp</code>ã€‚</p><p>å…¶ä¸­è¯¸å¦‚ <code>en, zh, cn, jp</code> ï¼Œä¹Ÿå³è¯­è¨€ç¼–ç ï¼Œåœ¨ä¸åŒç‰ˆæœ¬çš„è¯­è¨€ç¼–ç ç‰ˆæœ¬ä¸­ç•¥æœ‰ä¸åŒï¼Œå…·ä½“å¯å‚è€ƒæ–‡ç« ä¸‹æ–¹å‚è€ƒèµ„æ–™ã€‚</p><p>åœ¨æœ¬æ–‡æ¡ˆä¾‹ä¸­ï¼Œå°†ä»¥ <strong>ISO_3166</strong> ä¸­çš„ <strong><code>en</code></strong> å’Œ <strong><code>zh</code></strong> ç¼–ç åˆ†åˆ«ä»£è¡¨è‹±æ–‡å’Œä¸­æ–‡ã€‚</p><h2 id="å¼€å§‹é…ç½®å¤šè¯­è¨€"><a href="#å¼€å§‹é…ç½®å¤šè¯­è¨€" class="headerlink" title="å¼€å§‹é…ç½®å¤šè¯­è¨€"></a>å¼€å§‹é…ç½®å¤šè¯­è¨€</h2><p>é¡¹ç›®ä¹‹å‰çš„æ–‡ä»¶ç»“æ„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ next.svg</span><br><span class="line">â”‚Â Â  â””â”€â”€ vercel.svg</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â””â”€â”€ app</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ globals.css</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ layout.tsx</span><br><span class="line">â”‚Â Â      â””â”€â”€ page.tsx</span><br><span class="line">â”œâ”€â”€ tailwind.config.ts</span><br><span class="line">â””â”€â”€ tsconfig.json</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨ <code>app</code> ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ <code>[lang]</code>ï¼Œç„¶åå°† <code>app</code> ç›®å½•çš„ <code>laytout.tsx</code> å’Œ <code>page.tsx</code> ç§»å…¥ <code>[locales]</code>ä¸­ï¼Œ</p><p>ç§»åŠ¨åçš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ postcss.config.mjs</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ next.svg</span><br><span class="line">â”‚Â Â  â””â”€â”€ vercel.svg</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â””â”€â”€ app</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ [lang]</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ layout.tsx</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ page.tsx</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚Â Â      â””â”€â”€ globals.css</span><br><span class="line">â”œâ”€â”€ tailwind.config.ts</span><br><span class="line">â””â”€â”€ tsconfig.json</span><br></pre></td></tr></table></figure><blockquote><p>Tips: </p><p>æ³¨æ„åŒæ­¥ä¿®æ”¹ layout.tsx ä¸­ globals.css çš„å¼•ç”¨ä½ç½®ã€‚</p></blockquote><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸åŒè¯­è¨€çš„ json èµ„æºæ–‡ä»¶ï¼Œä½ å¯ä»¥æ”¾å…¥ä½ ä¹ æƒ¯çš„æ–‡ä»¶ç›®å½•ï¼Œæˆ‘è¿™é‡Œæ”¾å…¥ <code>public/dictionaries</code>ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><p><strong>en.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Next.js i18n Demo&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;How to implement i18n with Next.js (based on App Router)&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;home&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello, Next.js i18n&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;This is a demo of Next.js i18n&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>zh.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Next.js i18n ç¤ºä¾‹&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ææ‡‚ Next.js å®ç° i18n å›½é™…åŒ–å¤šè¯­è¨€(åŸºäºApp Router)&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;home&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ å¥½, Next.js i18n&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ª Next.js i18n ç¤ºä¾‹&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç´§æ¥ç€ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨äºåŠ è½½å¤šè¯­è¨€èµ„æºæ–‡ä»¶å¹¶è·å–ç›¸åº”è¯­è¨€æ–‡æœ¬ã€‚</p><p>åœ¨ <code>app/[lang]</code> ç›®å½•æ·»åŠ  <code>dictionaries.js</code>ï¼Œæ³¨æ„æ£€æŸ¥æ–‡ä»¶ç›®å½•åŠæ–‡ä»¶åæ˜¯æ­£ç¡®å¹¶åŒ¹é…çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;server-only&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> dictionaries = &#123;</span><br><span class="line">  <span class="attr">en</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dictionaries/en.json&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="variable language_">module</span></span>) =&gt;</span> <span class="variable language_">module</span>.<span class="property">default</span>),</span><br><span class="line">  <span class="attr">zh</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dictionaries/zh.json&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params"><span class="variable language_">module</span></span>) =&gt;</span> <span class="variable language_">module</span>.<span class="property">default</span>),</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getDictionary</span> = <span class="keyword">async</span> (<span class="params">locale</span>) =&gt; dictionaries[locale]()</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨å¤šè¯­è¨€"><a href="#ä½¿ç”¨å¤šè¯­è¨€" class="headerlink" title="ä½¿ç”¨å¤šè¯­è¨€"></a>ä½¿ç”¨å¤šè¯­è¨€</h2><p>æˆ‘ä»¬åœ¨ <code>pages.tsx</code> é¡µé¢ä¸­ä½¿ç”¨å¤šè¯­è¨€åŠŸèƒ½ã€‚</p><p>é¦–å…ˆï¼Œä¸ºå‡½æ•°å¢åŠ  <code>lang</code> å‚æ•°ï¼Œæ³¨æ„ä¸ºå‡½æ•°æ·»åŠ  <code>async</code> å…³é”®å­—ï¼Œ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params">&#123; params: &#123; lang &#125; &#125;: &#123; params: &#123; lang: <span class="built_in">string</span> &#125; &#125;</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ·»åŠ å¤šè¯­è¨€çš„è°ƒç”¨ï¼Œ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> t = <span class="keyword">await</span> <span class="title function_">getDictionary</span>(lang);</span><br></pre></td></tr></table></figure><p>åœ¨é¡µé¢ä¸Šä½¿ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘å°† <code>page.tsx</code> ä¸Šé»˜è®¤çš„ä»£ç è¿›è¡Œæ¸…ç†ï¼Œåªä¿ç•™æ–‡æœ¬å±•ç¤ºã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;main className=<span class="string">&quot;flex min-h-screen flex-col items-center justify-between p-24&quot;</span>&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;fixed left-0 top-0 flex w-full justify-center border-b border-gray-300 bg-gradient-to-b from-zinc-200 pb-6 pt-8 backdrop-blur-2xl dark:border-neutral-800 dark:bg-zinc-800/30 dark:from-inherit lg:static lg:w-auto  lg:rounded-xl lg:border lg:bg-gray-200 lg:p-4 lg:dark:bg-zinc-800/30&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           &#123;t.home.title&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">      &#123;t.<span class="property">home</span>.<span class="property">desc</span>&#125;</span><br><span class="line">&lt;/main&gt;</span><br></pre></td></tr></table></figure><p>é‡å¯ç¨‹åºæˆ–ç­‰ç¨‹åºçƒ­æ›´æ–°æˆåŠŸï¼Œåˆ†åˆ«æ‰“å¼€ä¸åŒè¯­è¨€çš„é¡µé¢ <a href="http://localhost:3000/en">http://localhost:3000/en</a>  <a href="http://localhost:3000/zh">http://localhost:3000/zh</a> å³å¯çœ‹åˆ°æ•ˆæœã€‚</p><h2 id="è®¾ç½®é»˜è®¤è¯­è¨€"><a href="#è®¾ç½®é»˜è®¤è¯­è¨€" class="headerlink" title="è®¾ç½®é»˜è®¤è¯­è¨€"></a>è®¾ç½®é»˜è®¤è¯­è¨€</h2><p>çœ‹èµ·æ¥ä¸é”™ï¼Œä½†æ˜¯ç»†å¿ƒçš„æœ‹å‹ä¼šå‘ç°æ‰“å¼€  <a href="http://localhost:3000/">http://localhost:3000</a> ä¼šå‡ºç° 404 errorã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœªé€‰æ‹©è¯­è¨€æ—¶ï¼Œé»˜è®¤è®¾ç½®ä¸€ä¸ªè¯­è¨€ã€‚</p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>src</code> ç›®å½•åˆ›å»ºä¸€ä¸ª <code>middleware.ts</code> ï¼Œç„¶åå¤åˆ¶æ–‡æ¡£ä¸­çš„ä»£ç ã€‚</p><p>æ ¸å¿ƒé€»è¾‘å¾ˆç®€å•ï¼š</p><p><strong>åˆ¤æ–­ URL çš„ <code>pathname</code> ä¸­æ˜¯å¦å«æœ‰æŸä¸ªè¯­è¨€æ ‡è¯†ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™åœ¨è·å–åˆé€‚çš„è¯­è¨€åï¼Œå°† URL é‡å®šå‘ä¸º <code>/$&#123;locale&#125;$&#123;pathname&#125;</code></strong></p><p>é‡ç‚¹åœ¨ <code>getLocale</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šåˆé€‚çš„è¯­è¨€ã€‚åœ¨æ­¤å¤„ï¼Œæˆ‘ä»¬å…ˆç®€å•å¤„ç†ï¼šä½¿ç”¨é»˜è®¤çš„ <code>defaultLocale = &quot;en&quot;</code> ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextRequest</span>, <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&quot;next/server&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> locales = [<span class="string">&quot;en&quot;</span>, <span class="string">&quot;zh&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> defaultLocale = <span class="string">&quot;en&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the preferred locale, similar to the above or using a library</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getLocale</span>(<span class="params">request: NextRequest</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> defaultLocale;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request: NextRequest</span>) &#123;</span><br><span class="line">  <span class="comment">// Check if there is any supported locale in the pathname</span></span><br><span class="line">  <span class="keyword">const</span> &#123; pathname &#125; = request.<span class="property">nextUrl</span>;</span><br><span class="line">  <span class="keyword">const</span> pathnameHasLocale = locales.<span class="title function_">some</span>(</span><br><span class="line">    <span class="function">(<span class="params">locale</span>) =&gt;</span> pathname.<span class="title function_">startsWith</span>(<span class="string">`/<span class="subst">$&#123;locale&#125;</span>/`</span>) || pathname === <span class="string">`/<span class="subst">$&#123;locale&#125;</span>`</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (pathnameHasLocale) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Redirect if there is no locale</span></span><br><span class="line">  <span class="keyword">const</span> locale = <span class="title function_">getLocale</span>(request);</span><br><span class="line">  request.<span class="property">nextUrl</span>.<span class="property">pathname</span> = <span class="string">`/<span class="subst">$&#123;locale&#125;</span><span class="subst">$&#123;pathname&#125;</span>`</span>;</span><br><span class="line">  <span class="comment">// e.g. incoming request is /products</span></span><br><span class="line">  <span class="comment">// The new URL is now /en-US/products</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(request.<span class="property">nextUrl</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="attr">matcher</span>: [</span><br><span class="line">    <span class="comment">// Skip all internal paths (_next)</span></span><br><span class="line">    <span class="string">&quot;/((?!_next).*)&quot;</span>,</span><br><span class="line">    <span class="comment">// Optional: only run on root (/) URL</span></span><br><span class="line">    <span class="comment">// &#x27;/&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç¨‹åºæ›´æ–°åï¼Œæˆ‘ä»¬æ‰“å¼€ <a href="http://localhost:3000/">http://localhost:3000/</a> å¯ä»¥çœ‹åˆ°ä¼šè‡ªåŠ¨è·³è½¬åˆ°è®¾ç½®çš„é»˜è®¤è¯­è¨€é¡µé¢ã€‚</p><h2 id="è·å–é»˜è®¤è¯­è¨€çš„ä¼˜åŒ–"><a href="#è·å–é»˜è®¤è¯­è¨€çš„ä¼˜åŒ–" class="headerlink" title="è·å–é»˜è®¤è¯­è¨€çš„ä¼˜åŒ–"></a>è·å–é»˜è®¤è¯­è¨€çš„ä¼˜åŒ–</h2><p>åœ¨ä¸Šä¸€èŠ‚è·å–é»˜è®¤è¯­è¨€æ—¶ï¼Œæˆ‘ä»¬ç®€å•å¤„ç†ä¸º <code>defaultLocale = &quot;en&quot;</code> ï¼Œæ›´ä¼˜é›…çš„æ–¹å¼æ˜¯ï¼š<strong>æ ¹æ®ç”¨æˆ·çš„ç³»ç»Ÿæˆ–è€…æµè§ˆå™¨çš„è¯­è¨€æ¥è®¾ç½®é»˜è®¤è¯­è¨€</strong>ï¼š</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è·å–æµè§ˆå™¨ HTTP headers ä¸­çš„  <code>Accept-Language</code> å­—æ®µæ¥è¾¾åˆ°ç›®çš„ã€‚å®ƒçš„æ•°æ®æ ¼å¼å¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è‹±æ–‡æ—¶ï¼š</span><br><span class="line">accept-language: en-US,en;q=0.5</span><br><span class="line">ä¸­æ–‡æ—¶ï¼š</span><br><span class="line">accept-language: zh-CN,zh-Hans;q=0.9</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°† <code>middleware</code> æ”¹é€ å¦‚ä¸‹ï¼š</p><ol><li><strong>ä» HTTP headers ä¸­è·å– <code>Accept-Language</code>ï¼Œå¦‚æœä¸ºç©ºåˆ™è¿”å›é»˜è®¤è¯­è¨€</strong></li><li><strong>è§£æ <code>Accept-Language</code> ä¸­çš„è¯­è¨€åˆ—è¡¨ï¼Œå¹¶æ ¹æ®é…ç½®çš„è¯­è¨€åˆ—è¡¨ï¼ŒåŒ¹é…è·å–å¯¹åº”çš„è¯­è¨€ï¼ˆå¦‚æœæ²¡æœ‰åˆ™è¿”å›é»˜è®¤è¯­è¨€ï¼‰</strong></li></ol><p>å®‰è£…ä¾èµ– <code>@formatjs/intl-localematcher</code>, <code>negotiator</code>, <code>@types/negotiator</code>ï¼Œå¹¶å®ç°å¦‚ä¸‹é€»è¾‘ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getLocale</span>(<span class="params">request: NextRequest</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> acceptLang = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;Accept-Language&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!acceptLang) <span class="keyword">return</span> defaultLocale;</span><br><span class="line">  <span class="keyword">const</span> headers = &#123; <span class="string">&quot;accept-language&quot;</span>: acceptLang &#125;;</span><br><span class="line">  <span class="keyword">const</span> languages = <span class="keyword">new</span> <span class="title class_">Negotiator</span>(&#123; headers &#125;).<span class="title function_">languages</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">match</span>(languages, locales, defaultLocale);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¿®æ”¹ç³»ç»Ÿçš„è¯­è¨€ï¼Œæ‰“å¼€ <a href="http://localhost:3000/">http://localhost:3000</a> ä¼šè‡ªåŠ¨è·³è½¬åˆ°åŒç³»ç»Ÿè¯­è¨€ä¸€è‡´çš„é¡µé¢ï¼Œæµ‹è¯•æˆåŠŸã€‚</p><h2 id="å¤šè¯­è¨€çš„å…¶å®ƒå¤„ç†"><a href="#å¤šè¯­è¨€çš„å…¶å®ƒå¤„ç†" class="headerlink" title="å¤šè¯­è¨€çš„å…¶å®ƒå¤„ç†"></a>å¤šè¯­è¨€çš„å…¶å®ƒå¤„ç†</h2><h4 id="å­˜å‚¨ç”¨æˆ·ç½‘é¡µè¯­è¨€"><a href="#å­˜å‚¨ç”¨æˆ·ç½‘é¡µè¯­è¨€" class="headerlink" title="å­˜å‚¨ç”¨æˆ·ç½‘é¡µè¯­è¨€"></a>å­˜å‚¨ç”¨æˆ·ç½‘é¡µè¯­è¨€</h4><p>æ›´è¿›ä¸€æ­¥åœ°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Cookie ä¸­å­˜å‚¨ç”¨æˆ·ç½‘é¡µä¸­çš„è¯­è¨€ï¼Œå¹¶åœ¨ä¸‹æ¬¡è®¿é—®æ—¶ä½¿ç”¨ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–Cookie </span></span><br><span class="line"><span class="keyword">if</span> (request.<span class="property">cookies</span>.<span class="title function_">has</span>(cookieName)) &#123;</span><br><span class="line">  <span class="keyword">return</span> request.<span class="property">cookies</span>.<span class="title function_">get</span>(cookieName)!.<span class="property">value</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½® Cookie</span></span><br><span class="line">response.<span class="property">cookies</span>.<span class="title function_">set</span>(cookieName, locale);</span><br></pre></td></tr></table></figure><h4 id="ç½‘é¡µæ ‡é¢˜æè¿°ç­‰çš„å¤šè¯­è¨€å¤„ç†"><a href="#ç½‘é¡µæ ‡é¢˜æè¿°ç­‰çš„å¤šè¯­è¨€å¤„ç†" class="headerlink" title="ç½‘é¡µæ ‡é¢˜æè¿°ç­‰çš„å¤šè¯­è¨€å¤„ç†"></a>ç½‘é¡µæ ‡é¢˜æè¿°ç­‰çš„å¤šè¯­è¨€å¤„ç†</h4><p>åœ¨ç½‘é¡µ metadata ä¸­ä½¿ç”¨å¤šè¯­è¨€æ—¶ï¼Œ<code>page.tsx</code>æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">generateMetadata</span>(<span class="params">&#123; params: &#123; lang &#125; &#125; : &#123; params: &#123; lang: <span class="built_in">string</span> &#125; &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> t = <span class="keyword">await</span> <span class="title function_">getDictionary</span>(lang);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: t.<span class="property">page</span>.<span class="property">title</span>,</span><br><span class="line">    <span class="attr">description</span>: t.<span class="property">page</span>.<span class="property">desc</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="SSG-çš„å¤šè¯­è¨€å¤„ç†"><a href="#SSG-çš„å¤šè¯­è¨€å¤„ç†" class="headerlink" title="SSG çš„å¤šè¯­è¨€å¤„ç†"></a>SSG çš„å¤šè¯­è¨€å¤„ç†</h4><p>åœ¨å¤„ç†é™æ€ç«™ç‚¹ï¼ˆSSGï¼‰ä¸­ä½¿ç”¨å¤šè¯­è¨€æ—¶ï¼Œ<code>layout.tsx</code>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">LangParams</span> &#123;</span><br><span class="line">  <span class="attr">lang</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">generateStaticParams</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [&#123; <span class="attr">lang</span>: <span class="string">&quot;en&quot;</span> &#125;, &#123; <span class="attr">lang</span>: <span class="string">&quot;zh&quot;</span> &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  children,</span></span><br><span class="line"><span class="params">  params,</span></span><br><span class="line"><span class="params">&#125;: Readonly&lt;&#123;</span></span><br><span class="line"><span class="params">  children: React.ReactNode;</span></span><br><span class="line"><span class="params">  params: LangParams;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&#123;params.lang&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ‡æ¢å¤šè¯­è¨€ï¼ˆè¯­è¨€é€‰æ‹©å™¨æˆ–é“¾æ¥ï¼‰"><a href="#åˆ‡æ¢å¤šè¯­è¨€ï¼ˆè¯­è¨€é€‰æ‹©å™¨æˆ–é“¾æ¥ï¼‰" class="headerlink" title="åˆ‡æ¢å¤šè¯­è¨€ï¼ˆè¯­è¨€é€‰æ‹©å™¨æˆ–é“¾æ¥ï¼‰"></a>åˆ‡æ¢å¤šè¯­è¨€ï¼ˆè¯­è¨€é€‰æ‹©å™¨æˆ–é“¾æ¥ï¼‰</h4><p>å¯æ ¹æ®å®é™…æƒ…å†µæ·»åŠ è¯­è¨€é€‰æ‹©å™¨ï¼ˆä¸‹æ‹‰æ¡†ï¼‰æˆ–ä¸åŒçš„é“¾æ¥ï¼Œä»è€Œè·³è½¬åˆ°å¯¹åº”è¯­è¨€çš„é¡µé¢ã€‚</p><p>ä¾‹å¦‚é€šè¿‡é“¾æ¥å®ç°å¤šè¯­è¨€åˆ‡æ¢ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=<span class="string">&quot;space-x-2&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&quot;/en&quot;</span>&gt;</span>English<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>|<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&quot;/zh&quot;</span>&gt;</span>Chinese<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="å°¾å£°"></a>å°¾å£°</h2><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤çš„å­¦ä¹ ï¼Œæˆ‘ä»¬åˆæ­¥ç†Ÿæ‚‰å¹¶å®è·µäº†åœ¨ Next.js ä¸­ä½¿ç”¨å¤šè¯­è¨€ã€‚åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ï¼Œå›½é™…åŒ–çš„å·¥ä½œä¸æ­¢äºæ­¤ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿè¿˜æœ‰å°šæœªå®Œå–„çš„åœ°æ–¹ï¼Œå°±ç•™ç»™å±å¹•å‰çš„ä½ å§ã€‚</p><p>æœ€åé™„ä¸Š <code>middleware.ts</code> å®Œæ•´ä»£ç ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Negotiator</span> <span class="keyword">from</span> <span class="string">&quot;negotiator&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; match &#125; <span class="keyword">from</span> <span class="string">&quot;@formatjs/intl-localematcher&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextRequest</span>, <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&quot;next/server&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> locales = [<span class="string">&quot;en&quot;</span>, <span class="string">&quot;zh&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> defaultLocale = <span class="string">&quot;zh&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> cookieName = <span class="string">&quot;i18nlang&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the preferred locale, similar to the above or using a library</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getLocale</span>(<span class="params">request: NextRequest</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="comment">// Get locale from cookie</span></span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">cookies</span>.<span class="title function_">has</span>(cookieName))</span><br><span class="line">    <span class="keyword">return</span> request.<span class="property">cookies</span>.<span class="title function_">get</span>(cookieName)!.<span class="property">value</span>;</span><br><span class="line">  <span class="comment">// Get accept language from HTTP headers</span></span><br><span class="line">  <span class="keyword">const</span> acceptLang = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;Accept-Language&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!acceptLang) <span class="keyword">return</span> defaultLocale;</span><br><span class="line">  <span class="comment">// Get match locale</span></span><br><span class="line">  <span class="keyword">const</span> headers = &#123; <span class="string">&quot;accept-language&quot;</span>: acceptLang &#125;;</span><br><span class="line">  <span class="keyword">const</span> languages = <span class="keyword">new</span> <span class="title class_">Negotiator</span>(&#123; headers &#125;).<span class="title function_">languages</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">match</span>(languages, locales, defaultLocale);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request: NextRequest</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">nextUrl</span>.<span class="property">pathname</span>.<span class="title function_">startsWith</span>(<span class="string">&quot;/_next&quot;</span>)) <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Check if there is any supported locale in the pathname</span></span><br><span class="line">  <span class="keyword">const</span> &#123; pathname &#125; = request.<span class="property">nextUrl</span>;</span><br><span class="line">  <span class="keyword">const</span> pathnameHasLocale = locales.<span class="title function_">some</span>(</span><br><span class="line">    <span class="function">(<span class="params">locale</span>) =&gt;</span> pathname.<span class="title function_">startsWith</span>(<span class="string">`/<span class="subst">$&#123;locale&#125;</span>/`</span>) || pathname === <span class="string">`/<span class="subst">$&#123;locale&#125;</span>`</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (pathnameHasLocale) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Redirect if there is no locale</span></span><br><span class="line">  <span class="keyword">const</span> locale = <span class="title function_">getLocale</span>(request);</span><br><span class="line">  request.<span class="property">nextUrl</span>.<span class="property">pathname</span> = <span class="string">`/<span class="subst">$&#123;locale&#125;</span><span class="subst">$&#123;pathname&#125;</span>`</span>;</span><br><span class="line">  <span class="comment">// e.g. incoming request is /products</span></span><br><span class="line">  <span class="comment">// The new URL is now /en-US/products</span></span><br><span class="line">  <span class="keyword">const</span> response = <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(request.<span class="property">nextUrl</span>);</span><br><span class="line">  <span class="comment">// Set locale to cookie</span></span><br><span class="line">  response.<span class="property">cookies</span>.<span class="title function_">set</span>(cookieName, locale);</span><br><span class="line">  <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="attr">matcher</span>: [</span><br><span class="line">    <span class="comment">// Skip all internal paths (_next)</span></span><br><span class="line">    <span class="string">&quot;/((?!_next).*)&quot;</span>,</span><br><span class="line">    <span class="comment">// Optional: only run on root (/) URL</span></span><br><span class="line">    <span class="comment">// &#x27;/&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç å¯åœ¨ <a href="https://github.com/xumeng/next-i18n-demo">https://github.com/xumeng/next-i18n-demo</a> è·å–ã€‚</p><p>æœ€ç»ˆè¿è¡Œæ•ˆæœï¼š<a href="https://next-i18n-demo-two.vercel.app/">https://next-i18n-demo-two.vercel.app/</a></p><hr><h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><p><a href="https://nextjs.org/docs/app/building-your-application/routing/internationalization">https://nextjs.org/docs/app/building-your-application/routing/internationalization</a></p><p><a href="https://en.wikipedia.org/wiki/ISO_3166">https://en.wikipedia.org/wiki/ISO_3166</a></p><p><a href="https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes">https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes</a></p><p><a href="https://en.wikipedia.org/wiki/IETF_language_tag">https://en.wikipedia.org/wiki/IETF_language_tag</a></p><p><a href="https://www.alchemysoftware.com/livedocs/ezscript/Topics/Catalyst/Language.htm">https://www.alchemysoftware.com/livedocs/ezscript/Topics/Catalyst/Language.htm</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ–‡ç« å¯¼è¯»ï¼š&quot;&gt;&lt;a href=&quot;#æ–‡ç« å¯¼è¯»ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ–‡ç« å¯¼è¯»ï¼š&quot;&gt;&lt;/a&gt;æ–‡ç« å¯¼è¯»ï¼š&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†åœ¨ Next.js 14 (åŸºäºApp Router) ä¸­å®ç° i18n å›½é™…åŒ–å¤šè¯­è¨€åŠŸèƒ½ï¼Œå¹¶è€ƒè™‘åœ¨çœŸå®çš„</summary>
      
    
    
    
    
    <category term="Next.js" scheme="https://amonxu.com/tags/Next-js/"/>
    
    <category term="React" scheme="https://amonxu.com/tags/React/"/>
    
    <category term="i18n" scheme="https://amonxu.com/tags/i18n/"/>
    
    <category term="internationalization" scheme="https://amonxu.com/tags/internationalization/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šæ¸¸å­ã€‹</title>
    <link href="https://amonxu.com/2024/02/07/zh-CN/2024-02-07-Go-Home/"/>
    <id>https://amonxu.com/2024/02/07/zh-CN/2024-02-07-Go-Home/</id>
    <published>2024-02-07T00:01:01.000Z</published>
    <updated>2024-03-17T04:21:26.022Z</updated>
    
    <content type="html"><![CDATA[<img src="https://pic3.zhimg.com/v2-74eab3ea6cfe106c1e06a1f9eafe75a2_b.png" width="40%" /><p>æ‹–ç€è¡Œæç®±çš„äººä»¬ï¼Œ</p><p>æ»¡è½½ç€ä¸€å¹´çš„åŠ³ç´¯ï¼Œ</p><p>ç©¿è¿‡é•¿é•¿çš„é“é“ï¼Œ</p><p>å›åˆ°æ¯äº²æ€€å†…ï¼Œ</p><p>å¦ˆå¦ˆ</p><p>æˆ‘æƒ³å†ç¡ä¼š</p><blockquote><p>2024.2.7 <a href="https://www.zhihu.com/search?q=%E8%85%8A%E6%9C%88%E4%BA%8C%E5%8D%81%E5%85%AB&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22:%22answer%22,%22sourceId%22:3389717530%7D">è…ŠæœˆäºŒåå…«</a> æ™¨</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;img src=&quot;https://pic3.zhimg.com/v2-74eab3ea6cfe106c1e06a1f9eafe75a2_b.png&quot; width=&quot;40%&quot; /&gt;

&lt;p&gt;æ‹–ç€è¡Œæç®±çš„äººä»¬ï¼Œ&lt;/p&gt;
&lt;p&gt;æ»¡è½½ç€ä¸€å¹´çš„åŠ³ç´¯ï¼Œ&lt;/p&gt;
&lt;p&gt;ç©¿è¿‡é•¿é•¿çš„é“é“ï¼Œ&lt;/p</summary>
      
    
    
    
    <category term="è¯—" scheme="https://amonxu.com/categories/%E8%AF%97/"/>
    
    
    <category term="è¯—" scheme="https://amonxu.com/tags/%E8%AF%97/"/>
    
    <category term="2024" scheme="https://amonxu.com/tags/2024/"/>
    
  </entry>
  
  <entry>
    <title>How to solve error on CentOS &quot;/lib64/libstdc++.so.6 version GLIBCXX_3.4.xx not found&quot;</title>
    <link href="https://amonxu.com/2023/10/11/en/2023-10-11-CentOS-Error-libstdc++.so.6-version-GLIBCXX_3.4.xx-not-found/"/>
    <id>https://amonxu.com/2023/10/11/en/2023-10-11-CentOS-Error-libstdc++.so.6-version-GLIBCXX_3.4.xx-not-found/</id>
    <published>2023-10-11T14:33:55.000Z</published>
    <updated>2024-04-25T03:32:15.448Z</updated>
    
    <content type="html"><![CDATA[<hr><p>My personal server uses <code>CentOS 7.9</code>, and there are often strange errors when deploying some AI applications.<br>For example, recently, an error was reported when deploying an application:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/lib64/libstdc++.so.6: version GLIBCXX_3.4.xx not found</span><br></pre></td></tr></table></figure><p>Online search for solutions, there are different opinions, either reinstall <code>gcc</code>, or recompile and install <code>libstdc++</code>,<code>export LD_LIBRARY_PATH</code> and so on.<br>Several attempts have failed, and there is no way to upgrade the os version. Finally, a suitable solution is found, and itâ€™s worked for me.</p><ol><li>Find and display all packages that provide <code>libstdc++.so.6</code> as a library file through yum</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum provides libstdc++.so.6</span><br></pre></td></tr></table></figure><ol start="2"><li>Download new version <code>libstdc.so</code>.</li></ol><blockquote><p>NOTICE: Since I need version <code>3.4.22+</code>, so I can just update it to <code>3.4.26</code>.  Other versions are the same.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/lib64</span><br><span class="line">sudo wget http://www.vuln.cn/wp-content/uploads/2019/08/libstdc.so_.6.0.26.zip</span><br><span class="line">unzip libstdc.so_.6.0.26.zip</span><br></pre></td></tr></table></figure><ol start="3"><li>Copy <code>libstdc++.so.6.0.26</code> to <code>/usr/lib64</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp libstdc++.so.6.0.26 /usr/lib64</span><br><span class="line">cd /usr/lib64</span><br></pre></td></tr></table></figure><ol start="4"><li>Check the soft link version of <code>libstdc++.so.6</code>,</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l | grep libstdc++</span><br></pre></td></tr></table></figure><p>It may shows like this:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libstdc++.so.6 -&gt;libstdc++.so.6.0.19</span><br></pre></td></tr></table></figure><ol start="5"><li>Remove &#x2F;usr&#x2F;lib64 original link libstdc++.so.6, you can backup it before remove.</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm libstdc++.so.6</span><br></pre></td></tr></table></figure><p>then, relink it. </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s libstdc++.so.6.0.26 libstdc++.so.6</span><br></pre></td></tr></table></figure><ol start="6"><li>OK, check the newest link</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strings /usr/lib64/libstdc++.so.6 | grep GLIBCXX</span><br></pre></td></tr></table></figure><p>It may shows like this:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GLIBCXX_3.4</span><br><span class="line">...</span><br><span class="line">GLIBCXX_3.4.25</span><br><span class="line">GLIBCXX_3.4.26</span><br><span class="line">GLIBCXX_DEBUG_MESSAGE_LENGTH</span><br></pre></td></tr></table></figure><p>Well Done!</p>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;p&gt;My personal server uses &lt;code&gt;CentOS 7.9&lt;/code&gt;, and there are often strange errors when deploying some AI applications.&lt;br&gt;For exam</summary>
      
    
    
    
    
    <category term="Linux" scheme="https://amonxu.com/tags/Linux/"/>
    
    <category term="CentOS" scheme="https://amonxu.com/tags/CentOS/"/>
    
    <category term="gcc" scheme="https://amonxu.com/tags/gcc/"/>
    
    <category term="AI" scheme="https://amonxu.com/tags/AI/"/>
    
    <category term="C++" scheme="https://amonxu.com/tags/C/"/>
    
    <category term="transformer" scheme="https://amonxu.com/tags/transformer/"/>
    
    <category term="PyTorch" scheme="https://amonxu.com/tags/PyTorch/"/>
    
  </entry>
  
  <entry>
    <title>Hexo blog title include special symbols reports error</title>
    <link href="https://amonxu.com/2023/09/18/en/2023-09-03-Hexo-Title-Symbol-Error/"/>
    <id>https://amonxu.com/2023/09/18/en/2023-09-03-Hexo-Title-Symbol-Error/</id>
    <published>2023-09-18T05:42:55.000Z</published>
    <updated>2024-04-25T03:31:58.539Z</updated>
    
    <content type="html"><![CDATA[<hr><p>In my Hexo blog, when I include special symbols inside the title in posts, it reports this error: </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR Process failed: _posts/en/XXX.md</span><br><span class="line">YAMLException: incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 54:</span><br><span class="line">     ...  for Backend System Refactoring\: How to do backend system refac ...</span><br></pre></td></tr></table></figure><p><strong>Solution:</strong><br>Include the title in single quotes, like:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">title: &#x27;How to read a book&#x27;</span><br><span class="line">lang: en</span><br><span class="line">date: 2023-01-01</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;p&gt;In my Hexo blog, when I include special symbols inside the title in posts, it reports this error: &lt;/p&gt;
&lt;figure class=&quot;highlight plai</summary>
      
    
    
    
    
    <category term="Hexo" scheme="https://amonxu.com/tags/Hexo/"/>
    
    <category term="Blog" scheme="https://amonxu.com/tags/Blog/"/>
    
  </entry>
  
  <entry>
    <title>Best Practices for Backend System Refactoring: How to do backend system refactoring efficiently and with high quality</title>
    <link href="https://amonxu.com/2023/09/01/en/2023-09-01-Refactoring/"/>
    <id>https://amonxu.com/2023/09/01/en/2023-09-01-Refactoring/</id>
    <published>2023-09-01T14:10:33.000Z</published>
    <updated>2023-10-26T03:33:54.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://images.unsplash.com/photo-1491406213019-05b162a72c20?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60" alt="coverimg"></p><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>As the companyâ€™s business experiences explosive growth, both the scale of requirements and the user base are rapidly expanding. This presents challenges to the system in terms of the three high (high performance, high concurrency, high availability), scalability, and maintainability. The old system, due to various limitations in its early design (such as the expertise of early participants, the foresight of architectural design, impatience of management, etc.), gradually becomes inadequate to meet current and future demands, exposing various issues. Developers find themselves dragging an old, worn-out car on the highway, which is a daunting task. In simpler terms, the codebase of the old system has become too problematic to fix, leading to a situation where developers either get buried in its issues or abandon the project altogether.</p><p>At this point, a common question arises: should we continue trying to patch the issues, or should we choose to refactor? Patching is simply not feasible, not in this lifetime. Refactoring, on the other hand, requires the courage of a true hero because itâ€™s a complex and time-consuming task. Moreover, it can impact ongoing business development or even bring it to a standstill. Often, product managers and executives are not supportive because they only care about one thing: when will the next feature be ready? Everything else is your development teamâ€™s problem.</p><p>If you choose the path of refactoring, you must be prepared to see it through, no matter what. How can you ensure a successful refactoring from the get-go? Based on common practices in internet projects and my personal experience in refactoring projects, here is an outline of the common steps for refactoring systems of various sizes:</p><h3 id="Step-0-Convincing-Stakeholders"><a href="#Step-0-Convincing-Stakeholders" class="headerlink" title="Step 0: Convincing Stakeholders"></a>Step 0: Convincing Stakeholders</h3><p>Refactoring is not just the responsibility of the development team; itâ€™s a collective effort involving the entire project team. Refactoring can improve the systemâ€™s performance, availability, and scalability, as well as optimize and streamline business processes to meet new demands. It requires a significant investment of resources and must have the support of stakeholders. Typically, this requires explaining the benefits and drawbacks of refactoring, as well as the critical issues that would arise if refactoring is not done. Once you have their support, the refactoring work can officially begin.</p><p>Participants: Technical Leader</p><h3 id="Step-1-Establish-Clear-Refactoring-Goals"><a href="#Step-1-Establish-Clear-Refactoring-Goals" class="headerlink" title="Step 1: Establish Clear Refactoring Goals"></a>Step 1: Establish Clear Refactoring Goals</h3><p>Refactoring is a long-term endeavor; itâ€™s not something that can be completed in one or two iterations, or even within a few months. It requires a substantial investment of manpower, resources, time, and effort. So, what are our goals in this prolonged battle? Are we aiming to meet the systemâ€™s high-performance requirements through a more efficient architecture? Or do we want to enhance code quality through refactoring? Perhaps we aim to introduce new technologies and frameworks to upgrade the entire system or optimize business processes to address previously unmet requirements. Once you have clear goals, you can work purposefully.</p><p>Participants: Technical Leader, Architect</p><h3 id="Step-2-Define-the-Scope-of-Refactoring-and-Make-Predictions"><a href="#Step-2-Define-the-Scope-of-Refactoring-and-Make-Predictions" class="headerlink" title="Step 2: Define the Scope of Refactoring and Make Predictions"></a>Step 2: Define the Scope of Refactoring and Make Predictions</h3><p>Refactoring typically falls into several levels:</p><ul><li>Platform-level refactoring: Refactoring the entire platform, such as Alibaba transitioning from the LAMP stack to the Java platform.</li><li>System-level refactoring: Refactoring specific business systems, such as introducing microservices or SOA architecture to break down monolithic applications.</li><li>Architecture-level refactoring: Improving the existing architecture through adjustments and redesign, addressing architectural shortcomings, like decoupling business logic through layered design or introducing caching for improved concurrency.</li><li>Business-level refactoring: Addressing specific business requirements that cannot be met due to the limitations of the current system, often involving the refactoring of business processes or database structures.</li><li>Module&#x2F;code-level refactoring: The most common form of refactoring, typically involving the use of design patterns, encapsulation, and code optimization to improve code structure and performance.</li></ul><p>Determine the level of refactoring required, the overall scope, and the technology stack for refactoring. Then, conduct a scientific assessment and estimation of the refactoring work. This includes identifying the costs, required resources, and time commitments, as well as assessing whether ongoing business requirements can be accommodated during the refactoring process. Once these predictions are established, you can provide stakeholders with a clear understanding, especially when they ask when new requirements can be delivered.</p><p>Participants: Technical Leader, Architect, Developers</p><h3 id="Step-3-Familiarize-Yourself-with-the-Old-System-and-Document-Business-Processes"><a href="#Step-3-Familiarize-Yourself-with-the-Old-System-and-Document-Business-Processes" class="headerlink" title="Step 3: Familiarize Yourself with the Old System and Document Business Processes"></a>Step 3: Familiarize Yourself with the Old System and Document Business Processes</h3><p>Refactoring is not about abandoning the old system; itâ€™s about continuously working with it. Knowing your enemy is the key to victory. Refactoring not only requires a clear understanding of the new systemâ€™s goals and future, but also a deep familiarity with the old system, especially its pitfalls. At this stage, the participants in the refactoring project, especially those who worked on the old system, should document and organize information related to the old systemâ€™s business and technical details. This includes collecting documents such as design documents, technical documents, architecture diagrams, UML diagrams, and ER diagrams related to the system.</p><p>The following are common preparation tasks before refactoring the old system:</p><ul><li>Gathering information and documentation related to the old system, including design documents, technical documents, architectural diagrams, UML diagrams, ER diagrams, and other graphical materials.</li><li>Mapping and documenting business lines and processes, outlining projects and business flows, and documenting them.</li><li>Reviewing key code and database designs in the old system.</li></ul><p>Any issues or uncertainties should be addressed promptly through communication with relevant personnel from the business side, ensuring that problems are resolved early in the process.</p><p>Participants: Technical Leader, Architect, Developers</p><h3 id="Step-4-Database-Refactoring"><a href="#Step-4-Database-Refactoring" class="headerlink" title="Step 4: Database Refactoring"></a>Step 4: Database Refactoring</h3><p>If the refactoring involves changes to the database, database refactoring is typically the first step. Many refactoring initiatives are triggered by issues related to the database. During database refactoring, the deficiencies and obstacles in the old systemâ€™s database design are addressed. This may involve redesigning tables using normalization or denormalization techniques, considering sharding or partitioning strategies, and more.</p><p>Participants: DBA, Architect</p><h3 id="Step-5-Backend-System-Refactoring"><a href="#Step-5-Backend-System-Refactoring" class="headerlink" title="Step 5: Backend System Refactoring"></a>Step 5: Backend System Refactoring</h3><p>Before starting the backend system refactoring, itâ€™s essential to have design and technical documentation in place, as mentioned earlier. Once these documents are finalized through discussions and planning, the architect can proceed with system architecture design, and backend developers can begin coding. This phase is often the most time-consuming and critical part of the refactoring process. The quality of the backend architecture directly affects the success of the refactoring, the quality of the business code, and the overall refactoring quality.</p><p>Due to the extended timeline of this phase and the fact that its results may not be immediately visible, Agile development methodologies are often used. This allows for iterative development, ensuring effective planning and continuous progress. The advantages of using iterations include:</p><ol><li>Effective planning and quantification of the entire refactoring process.</li><li>Visible achievements at each stage, preventing the team from getting stuck in a long refactoring process.</li><li>The ability to test or observe refactored parts promptly during iterations, allowing continuous learning and improvement.</li></ol><p>During backend system refactoring, itâ€™s essential to have clear, quantifiable goals and standards. For example, defining the QPS (Queries Per Second) supported by various systems and business modules, the expected response times for interfaces, etc. This enables the team to focus on achieving these goals during refactoring.</p><p>Regular code reviews should also be conducted throughout the refactoring process to identify and address issues with the refactoring itself and the quality of the code. This helps prevent the introduction of poor designs or subpar code that could harm the entire system.</p><p>Participants: Technical Leader, Architect, Developers</p><h3 id="Step-6-Data-Migration-and-Verification"><a href="#Step-6-Data-Migration-and-Verification" class="headerlink" title="Step 6: Data Migration and Verification"></a>Step 6: Data Migration and Verification</h3><p>If database refactoring is part of the project, data migration becomes a crucial step. It generally involves two types of migration: full migration and incremental migration. Full migration transfers all data from the old system to the new one in one go, while incremental migration handles data created in the old system after full migration until the old system is retired. These migrations are typically scripted or programmed to avoid manual errors.</p><p>After migration, itâ€™s essential to compare the data between the old and new systems. This comparison can also be automated through scripts or programs to identify discrepancies and perform any necessary adjustments or investigations.</p><p>Participants: DBA, Developers</p><h3 id="Step-7-System-Validation-Integration-and-Testing"><a href="#Step-7-System-Validation-Integration-and-Testing" class="headerlink" title="Step 7: System Validation, Integration, and Testing"></a>Step 7: System Validation, Integration, and Testing</h3><p>As the backend system refactoring progresses, scripts and programs should be developed to validate the business interfaces between the old and new systems. This ensures that issues in the refactoring process are detected promptly, and, if necessary, architectural and database adjustments can be made. Additionally, increasing unit test coverage during refactoring is highly beneficial.</p><p>Once the dependencies between systems and modules are resolved, integration testing can begin. Comprehensive testing, including functional testing, stability testing, performance testing, local testing, and simulating production environments, should be performed. Any issues identified during testing should be addressed, verified, and fixed to meet the standards required for a smooth release.</p><p>Participants: Architect, Developers, Testers</p><h3 id="Step-8-Gradual-Deployment-and-Monitoring"><a href="#Step-8-Gradual-Deployment-and-Monitoring" class="headerlink" title="Step 8: Gradual Deployment and Monitoring"></a>Step 8: Gradual Deployment and Monitoring</h3><p>When the backend system refactoring reaches a certain level of stability, itâ€™s time to initiate gradual deployment. During this phase, only a portion of the traffic is directed to the new system. This allows for real-time tracking and analysis of logs and monitoring alarms. Any issues or anomalies can be addressed promptly. As confidence in the new systemâ€™s stability grows, the scope and volume of the deployment can be gradually increased. Continuous monitoring of logs and alarms should be maintained throughout this phase.</p><p>Participants: DevOps Team, Testers, Developers</p><h3 id="Step-9-System-Transition"><a href="#Step-9-System-Transition" class="headerlink" title="Step 9: System Transition"></a>Step 9: System Transition</h3><p>When it comes to transitioning to the new system, itâ€™s crucial to have a well-defined transition plan in place. This plan should include detailed processes, workflows, and contingency plans, including rollback procedures in case unexpected issues arise. This step ensures that the transition is smooth and minimizes disruption to the business.</p><p>Participants: DevOps Team, Testers</p><h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>After completing the above steps, the system has undergone successful refactoring. However, itâ€™s essential to understand that refactoring is a substantial undertaking, and even after the process, the system may not be flawless. Refactoring is not the endpoint but rather a new beginning.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://images.unsplash.com/photo-1491406213019-05b162a72c20?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=50</summary>
      
    
    
    
    <category term="Technology" scheme="https://amonxu.com/categories/Technology/"/>
    
    
    <category term="Architecture" scheme="https://amonxu.com/tags/Architecture/"/>
    
    <category term="System Design" scheme="https://amonxu.com/tags/System-Design/"/>
    
    <category term="Refactoring" scheme="https://amonxu.com/tags/Refactoring/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šä¸€ä¸ªåœ°æ–¹ï¼Œäººæ»¡ä¸ºæ‚£ã€‹</title>
    <link href="https://amonxu.com/2023/07/22/zh-CN/2023-07-22-Hospital/"/>
    <id>https://amonxu.com/2023/07/22/zh-CN/2023-07-22-Hospital/</id>
    <published>2023-07-21T17:01:01.000Z</published>
    <updated>2023-09-04T09:48:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>é‡Œé¢ï¼Œ</p><p>å–å·ï¼Œ<br>æ’é˜Ÿï¼Œ<br>å«å·ï¼Œ<br>ä»˜è´¹ã€‚</p><p>ä¸€åˆ‡ä¸ºäº†æ´»ç€ã€‚</p><hr><p>å¤–é¢ï¼Œ</p><p>å·¥ä½œï¼Œ<br>ç”Ÿæ´»ï¼Œ<br>äº«ä¹ï¼Œ<br>å—ç½ªã€‚</p><p>æ´»ç€ä¸ºäº†ä¸€åˆ‡ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é‡Œé¢ï¼Œ&lt;/p&gt;
&lt;p&gt;å–å·ï¼Œ&lt;br&gt;æ’é˜Ÿï¼Œ&lt;br&gt;å«å·ï¼Œ&lt;br&gt;ä»˜è´¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€åˆ‡ä¸ºäº†æ´»ç€ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å¤–é¢ï¼Œ&lt;/p&gt;
&lt;p&gt;å·¥ä½œï¼Œ&lt;br&gt;ç”Ÿæ´»ï¼Œ&lt;br&gt;äº«ä¹ï¼Œ&lt;br&gt;å—ç½ªã€‚&lt;/p&gt;
&lt;p&gt;æ´»ç€ä¸ºäº†ä¸€åˆ‡ã€‚&lt;/p&gt;
</summary>
      
    
    
    
    <category term="è¯—" scheme="https://amonxu.com/categories/%E8%AF%97/"/>
    
    
    <category term="è¯—" scheme="https://amonxu.com/tags/%E8%AF%97/"/>
    
    <category term="2023" scheme="https://amonxu.com/tags/2023/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šæˆ‘ã€‹</title>
    <link href="https://amonxu.com/2023/04/07/zh-CN/2023-04-07-My-King/"/>
    <id>https://amonxu.com/2023/04/07/zh-CN/2023-04-07-My-King/</id>
    <published>2023-04-06T17:01:01.000Z</published>
    <updated>2023-09-04T09:49:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ—©é«˜å³°çš„æ´ªæµä¸­ï¼Œ<br>æˆ‘è¢«äººç¾¤ç°‡æ‹¥ç€ï¼Œ<br>ä»¿ä½›ç”Ÿå‘½ä¹‹ç‹ã€‚</p><p>æˆ‘æ„Ÿè§‰è‡ªå·±ï¼Œ<br>æ´»ç€ã€‚<br>ä½†åˆæ„Ÿè§‰ï¼Œ<br>æ­»äº†ã€‚</p><blockquote><p>ChatGPTè¾…åŠ©åˆ›ä½œ</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ—©é«˜å³°çš„æ´ªæµä¸­ï¼Œ&lt;br&gt;æˆ‘è¢«äººç¾¤ç°‡æ‹¥ç€ï¼Œ&lt;br&gt;ä»¿ä½›ç”Ÿå‘½ä¹‹ç‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æ„Ÿè§‰è‡ªå·±ï¼Œ&lt;br&gt;æ´»ç€ã€‚&lt;br&gt;ä½†åˆæ„Ÿè§‰ï¼Œ&lt;br&gt;æ­»äº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ChatGPTè¾…åŠ©åˆ›ä½œ&lt;/p&gt;
&lt;/blockquote&gt;
</summary>
      
    
    
    
    <category term="è¯—" scheme="https://amonxu.com/categories/%E8%AF%97/"/>
    
    
    <category term="è¯—" scheme="https://amonxu.com/tags/%E8%AF%97/"/>
    
    <category term="2023" scheme="https://amonxu.com/tags/2023/"/>
    
  </entry>
  
  <entry>
    <title>How to solve error GitHub Permission denied fatal Could not read from remote repository</title>
    <link href="https://amonxu.com/2023/01/01/en/2023-01-01-GitHub-Permission-denied-fatal-Could-not-read-from-remote-repository/"/>
    <id>https://amonxu.com/2023/01/01/en/2023-01-01-GitHub-Permission-denied-fatal-Could-not-read-from-remote-repository/</id>
    <published>2023-01-01T03:23:55.000Z</published>
    <updated>2024-04-25T03:32:06.168Z</updated>
    
    <content type="html"><![CDATA[<hr><p>There are multiple Git libraries are used on my machine, such as GitHub&#x2F;Company Private Git repo, etc., the Git tool mainly uses Terminal and GitKraken, and occasionally strange issues will arise. For example, the following error occurred when deploying the Hexo Blog a few days ago:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Permission denied (publickey).</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure><p>The usual solution is to regenerate the SSH Key of GitHub.</p><p>But thereâ€™s no issue with my local configuration, I can push code normally in Terminal and GitKraken.</p><p>Guessing that there might be some hitch in the process, I used:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>And saw:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi &#123;username&#125;! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><p>Then redeployed and pushed, Itâ€™s worked!</p><p>Reference:</p><blockquote><p><a href="https://docs.github.com/en/authentication/troubleshooting-ssh/error-permission-denied-publickey">https://docs.github.com/en/authentication/troubleshooting-ssh/error-permission-denied-publickey</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;p&gt;There are multiple Git libraries are used on my machine, such as GitHub&amp;#x2F;Company Private Git repo, etc., the Git tool mainly use</summary>
      
    
    
    
    
    <category term="Git" scheme="https://amonxu.com/tags/Git/"/>
    
    <category term="GitHub" scheme="https://amonxu.com/tags/GitHub/"/>
    
    <category term="Hexo" scheme="https://amonxu.com/tags/Hexo/"/>
    
    <category term="ssh" scheme="https://amonxu.com/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³é”™è¯¯ GitHub Permission denied fatal Could not read from remote repository</title>
    <link href="https://amonxu.com/2023/01/01/zh-CN/2023-01-01-GitHub-Permission-denied-fatal-Could-not-read-from-remote-repository/"/>
    <id>https://amonxu.com/2023/01/01/zh-CN/2023-01-01-GitHub-Permission-denied-fatal-Could-not-read-from-remote-repository/</id>
    <published>2023-01-01T03:23:55.000Z</published>
    <updated>2024-04-25T03:32:24.635Z</updated>
    
    <content type="html"><![CDATA[<hr><p>æœºå™¨ä¸Šä½¿ç”¨äº†å¤šä¸ª Git åº“ï¼Œæ¯”å¦‚ GitHub&#x2F;å…¬å¸ Git åº“ç­‰ï¼ŒGit å·¥å…·ä¸»è¦ä½¿ç”¨ Terminal å’Œ GitKrakenï¼Œå¶å°”ä¼šå‡ºç°å¥‡æ€ªçš„é—®é¢˜ã€‚æ¯”å¦‚å‰ä¸¤å¤©åœ¨éƒ¨ç½² Hexo Blog æ—¶ï¼Œé‡åˆ°ä»¥ä¸‹æŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Permission denied (publickey).</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure><p>é€šå¸¸çš„è§£å†³æ–¹æ¡ˆæ˜¯é‡æ–°ç”Ÿæˆ GitHub çš„ SSH Keyã€‚</p><p>ä½†æ˜¯æˆ‘æœ¬åœ°çš„é…ç½®æ˜¯æ²¡é—®é¢˜çš„ï¼Œå¯ä»¥åœ¨ Terminal å’ŒGitKrakenæ­£å¸¸æäº¤ä»£ç ã€‚</p><p>çŒœæƒ³å¯èƒ½æ˜¯å“ªä¸ªç¯èŠ‚ä¸é€šï¼Œäºæ˜¯ä½¿ç”¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi &#123;username&#125;! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><p>å†é‡æ–°éƒ¨ç½²æäº¤ï¼Œæå®šï¼</p><p>å‚è€ƒï¼š</p><blockquote><p><a href="https://docs.github.com/en/authentication/troubleshooting-ssh/error-permission-denied-publickey">https://docs.github.com/en/authentication/troubleshooting-ssh/error-permission-denied-publickey</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;p&gt;æœºå™¨ä¸Šä½¿ç”¨äº†å¤šä¸ª Git åº“ï¼Œæ¯”å¦‚ GitHub&amp;#x2F;å…¬å¸ Git åº“ç­‰ï¼ŒGit å·¥å…·ä¸»è¦ä½¿ç”¨ Terminal å’Œ GitKrakenï¼Œå¶å°”ä¼šå‡ºç°å¥‡æ€ªçš„é—®é¢˜ã€‚æ¯”å¦‚å‰ä¸¤å¤©åœ¨éƒ¨ç½² Hexo Blog æ—¶ï¼Œé‡åˆ°ä»¥ä¸‹æŠ¥é”™ï¼š&lt;/p&gt;
&lt;figure class=&quot;h</summary>
      
    
    
    
    
    <category term="Git" scheme="https://amonxu.com/tags/Git/"/>
    
    <category term="GitHub" scheme="https://amonxu.com/tags/GitHub/"/>
    
    <category term="Hexo" scheme="https://amonxu.com/tags/Hexo/"/>
    
    <category term="ssh" scheme="https://amonxu.com/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šå±± Â· å…¶äºŒã€‹</title>
    <link href="https://amonxu.com/2022/12/02/zh-CN/2022-12-02-Mountain/"/>
    <id>https://amonxu.com/2022/12/02/zh-CN/2022-12-02-Mountain/</id>
    <published>2022-12-01T17:01:01.000Z</published>
    <updated>2023-09-04T09:54:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»»åŠ¡å †ç§¯å¦‚å±±ï¼Œ<br>å€ºåŠ¡å †ç§¯å¦‚å±±ï¼Œ<br>èŒ«èŒ«ä¸€ç‰‡çœ‹ä¸è§ã€‚</p><p>æˆ‘ï¼Œ<br>å †ç§¯å¦‚å±±ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»»åŠ¡å †ç§¯å¦‚å±±ï¼Œ&lt;br&gt;å€ºåŠ¡å †ç§¯å¦‚å±±ï¼Œ&lt;br&gt;èŒ«èŒ«ä¸€ç‰‡çœ‹ä¸è§ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ï¼Œ&lt;br&gt;å †ç§¯å¦‚å±±ã€‚&lt;/p&gt;
</summary>
      
    
    
    
    <category term="è¯—" scheme="https://amonxu.com/categories/%E8%AF%97/"/>
    
    
    <category term="è¯—" scheme="https://amonxu.com/tags/%E8%AF%97/"/>
    
    <category term="2022" scheme="https://amonxu.com/tags/2022/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šå±± Â· å…¶ä¸€ã€‹</title>
    <link href="https://amonxu.com/2022/12/01/zh-CN/2022-12-01-Mountain/"/>
    <id>https://amonxu.com/2022/12/01/zh-CN/2022-12-01-Mountain/</id>
    <published>2022-11-30T17:01:01.000Z</published>
    <updated>2023-09-04T09:54:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ—è½¦ä»è¿œæ–¹ï¼Œ<br>å¸ä¸‹å¹´è½»äººï¼Œ<br>æ‹‰èµ°çˆ¶æ¯å¦»å„¿ï¼Œ<br>å’Œä¸­è€å¹´ã€‚</p><p>ä»–ä»¬èº«å‰ï¼Œ<br>æ˜¯æ‰¬èµ·çš„å¸†ï¼Œ<br>ä»–ä»¬èº«åï¼Œ<br>æ˜¯ç´¯ç´¯çš„å±±ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åˆ—è½¦ä»è¿œæ–¹ï¼Œ&lt;br&gt;å¸ä¸‹å¹´è½»äººï¼Œ&lt;br&gt;æ‹‰èµ°çˆ¶æ¯å¦»å„¿ï¼Œ&lt;br&gt;å’Œä¸­è€å¹´ã€‚&lt;/p&gt;
&lt;p&gt;ä»–ä»¬èº«å‰ï¼Œ&lt;br&gt;æ˜¯æ‰¬èµ·çš„å¸†ï¼Œ&lt;br&gt;ä»–ä»¬èº«åï¼Œ&lt;br&gt;æ˜¯ç´¯ç´¯çš„å±±ã€‚&lt;/p&gt;
</summary>
      
    
    
    
    <category term="è¯—" scheme="https://amonxu.com/categories/%E8%AF%97/"/>
    
    
    <category term="è¯—" scheme="https://amonxu.com/tags/%E8%AF%97/"/>
    
    <category term="2022" scheme="https://amonxu.com/tags/2022/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šåœ°é“ã€‹</title>
    <link href="https://amonxu.com/2022/11/30/zh-CN/2022-11-30-Metro-Train/"/>
    <id>https://amonxu.com/2022/11/30/zh-CN/2022-11-30-Metro-Train/</id>
    <published>2022-11-29T17:01:01.000Z</published>
    <updated>2023-09-04T09:54:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€å¤´é‡å…½ï¼Œ<br>åœ¨åœ°ä¸‹æ€’å¼ç‹‚å¥”ï¼Œ<br>ä»–åæ‰æƒ…ä¾£å¤«å¦»çˆ¶æ¯å„¿å¥³ï¼Œ<br>åå‡ºä¸€ä¸ªä¸ªæ²‰é»˜çš„æ‰“å·¥äººã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸€å¤´é‡å…½ï¼Œ&lt;br&gt;åœ¨åœ°ä¸‹æ€’å¼ç‹‚å¥”ï¼Œ&lt;br&gt;ä»–åæ‰æƒ…ä¾£å¤«å¦»çˆ¶æ¯å„¿å¥³ï¼Œ&lt;br&gt;åå‡ºä¸€ä¸ªä¸ªæ²‰é»˜çš„æ‰“å·¥äººã€‚&lt;/p&gt;
</summary>
      
    
    
    
    <category term="è¯—" scheme="https://amonxu.com/categories/%E8%AF%97/"/>
    
    
    <category term="è¯—" scheme="https://amonxu.com/tags/%E8%AF%97/"/>
    
    <category term="2022" scheme="https://amonxu.com/tags/2022/"/>
    
  </entry>
  
  <entry>
    <title>å†™äº11æœˆ27æ—¥</title>
    <link href="https://amonxu.com/2022/11/27/zh-CN/2022-11-27-Date/"/>
    <id>https://amonxu.com/2022/11/27/zh-CN/2022-11-27-Date/</id>
    <published>2022-11-27T14:18:01.000Z</published>
    <updated>2023-09-04T09:54:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>8å¹´å‰çš„ä¸€å¤©ï¼Œåœ¨ä¸€å®¶ç²¤èœåº—åƒä¸æ˜¯é¥­ç‚¹çš„åˆé¥­æ—¶ï¼Œæˆ‘ä¸€è¾¹å“ç€å¤§éº¦èŒ¶ï¼Œä¸€è¾¹å¯¹ç€å·¦é¡¾å³ç›¼ç€é¤å…ä¸å¤šçš„å®¢äººã€‚</p><p>é¤å…æ’­æ”¾ç€æ— èŠçš„èŠ‚ç›®ï¼Œä½†å½“æˆ‘è½¬å¤´çœ‹å‘ç”µå­æ—¶é’Ÿï¼Œä¸Šé¢è·³åŠ¨ç€çŒ©çº¢è‰²çš„æ•°å­—ï¼š2014å¹´11æœˆ27æ—¥ã€‚</p><p>ææƒšé—´ï¼Œè¿™å¹´è¿™æœˆè¿™æ—¥ç»„æˆè¿™ä¸€ä¸²ï¼Œäºæˆ‘é™Œç”Ÿæ— æ¯”ï¼Œä¸çŸ¥æ˜¯å¤–æ˜Ÿæ•°å­—æ¥äº†åœ°çƒï¼Œè¿˜æ˜¯æˆ‘è¿™åœ°çƒäººå»äº†å¤–æ˜Ÿã€‚</p><p>2-0-1-4ï¼Œ2014å¹´ï¼Ÿæˆ‘å°è±¡ä¸­å¹¶æ²¡æœ‰è¿™ä¹ˆä¸ªå¹´ï¼Œè¦è¯´æœ‰çš„ï¼Œå¤§æ¦‚æ˜¯äº›åˆšæ¯•ä¸šæ—¶ä¸Šå¤§å­¦ï¼Œåˆšé«˜è€ƒå®Œè¯»é«˜ä¸­ï¼Œåˆšå‡é«˜ä¸­è¯»åˆä¸­ï¼Œå‡åˆä¸­æ—¶è¯»å°å­¦çš„é‚£äº›å¹´ã€‚</p><p>1-1-2-7ï¼Œ11æœˆ27æ—¥ï¼Ÿè¿˜æ—©å‘¢ã€‚æˆ‘å¹¶æ²¡æœ‰åä¸€é•¿å‡ï¼Œä¹Ÿæœªæ›¾è¿‡è¿‡ä¸­ç§‹ï¼Œè¯´èµ·ç«¯åˆï¼Œç²½å­ä¹Ÿæ²¡åƒè¿‡ï¼Œäº”ä¸€å‘¢ï¼Œæˆ‘å€’æ²¡ä»€ä¹ˆè®°å¿†æ·±åˆ»çš„äº‹æƒ…ã€‚</p><p>ç°åœ¨ï¼Œåˆæ˜¯11æœˆ27æ—¥ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;8å¹´å‰çš„ä¸€å¤©ï¼Œåœ¨ä¸€å®¶ç²¤èœåº—åƒä¸æ˜¯é¥­ç‚¹çš„åˆé¥­æ—¶ï¼Œæˆ‘ä¸€è¾¹å“ç€å¤§éº¦èŒ¶ï¼Œä¸€è¾¹å¯¹ç€å·¦é¡¾å³ç›¼ç€é¤å…ä¸å¤šçš„å®¢äººã€‚&lt;/p&gt;
&lt;p&gt;é¤å…æ’­æ”¾ç€æ— èŠçš„èŠ‚ç›®ï¼Œä½†å½“æˆ‘è½¬å¤´çœ‹å‘ç”µå­æ—¶é’Ÿï¼Œä¸Šé¢è·³åŠ¨ç€çŒ©çº¢è‰²çš„æ•°å­—ï¼š2014å¹´11æœˆ27æ—¥ã€‚&lt;/p&gt;
&lt;p&gt;ææƒšé—´ï¼Œè¿™å¹´è¿™æœˆè¿™æ—¥ç»„æˆè¿™ä¸€ä¸²ï¼Œäºæˆ‘é™Œç”Ÿæ— æ¯”ï¼Œä¸çŸ¥</summary>
      
    
    
    
    <category term="Note" scheme="https://amonxu.com/categories/Note/"/>
    
    
    <category term="éšç¬”" scheme="https://amonxu.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
    <category term="2022" scheme="https://amonxu.com/tags/2022/"/>
    
  </entry>
  
  <entry>
    <title>ä»ä¼˜é›…åœ°æŸ¥çœ‹K8såº”ç”¨æ—¥å¿—èŠåˆ°æ—¥å¿—ç®¡ç†</title>
    <link href="https://amonxu.com/2022/10/12/zh-CN/2022-10-12-K8S-Logs/"/>
    <id>https://amonxu.com/2022/10/12/zh-CN/2022-10-12-K8S-Logs/</id>
    <published>2022-10-12T13:00:01.000Z</published>
    <updated>2023-09-15T09:46:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ›¾ä¸çŸ¥åœ¨å“ªå¬è¿‡ä¸€ç»å…¸åå¥ï¼šç¨‹åºå‘˜çš„å·¥ä½œæœ‰ä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯å†™ Bugï¼ŒäºŒæ˜¯æ‰¾ Bugã€‚</p><p>è¯´å½’è¯´ç¬‘å½’ç¬‘ï¼Œå¥ˆä½•è¯ç³™ç†ä¸ç³™ï¼šåœ¨ç¨‹åºå‘˜çš„å·¥ä½œä¸­ï¼ŒBugçš„æ’æŸ¥åˆ†æå’Œè§£å†³éªŒè¯ç¡®å®å ç›¸å½“å¯è§‚çš„ä¸€éƒ¨åˆ†æ—¶é—´ã€‚<br>é‚£ä¹ˆè¯´åˆ°ï¼Œè€Œåœ¨çœŸæ­£æ’æŸ¥ Bug æ—¶ï¼Œæ‰æ·±åˆ»ä½“ä¼šåˆ°å¦ä¸€åå¥ï¼šä¸å†™æ—¥å¿—ä¸€æ—¶çˆ½ï¼Œæ’æŸ¥ Bug ç«Zåœºã€‚</p><p>æ—¥å¿—ç®¡ç†ï¼Œä¸€ç›´æ˜¯å¼€å‘äººå‘˜çš„è€å¤§éš¾é¢˜ã€‚è¿™ä¸ªè€å¤§éš¾é¢˜ï¼Œå¤§è‡´åˆ†ä¸ºå‡ å—å†…å®¹ï¼š</p><h3 id="1-æ‰“å°æ—¥å¿—"><a href="#1-æ‰“å°æ—¥å¿—" class="headerlink" title="1. æ‰“å°æ—¥å¿—"></a>1. æ‰“å°æ—¥å¿—</h3><p>ç‹­ä¹‰ä¸Šçš„æ—¥å¿—ç®¡ç†ï¼Œä¹Ÿå³æ‰“å°æ—¥å¿—ã€‚å¥—ç”¨ 3W1H åˆ†ææ–¹æ³•å¯ä»¥åˆ†ä¸ºå‡ ä¸ªå­é—®é¢˜ï¼š</p><ol><li><p>Why ä¸ºä»€ä¹ˆè¦æ‰“æ—¥å¿—<br> æ˜¾è€Œæ˜“è§ï¼Œæ—¥å¿—æ˜¯è®°å½•å…³é”®ä¿¡æ¯å’Œæ•°æ®çš„åœ°æ–¹ï¼Œä»¥å¤‡æœªæ¥æ’æŸ¥é—®é¢˜å’Œæ•°æ®ç»Ÿè®¡åˆ†æä¹‹ç”¨ã€‚</p></li><li><p>What è¦æ‰“ä»€ä¹ˆæ ·çš„æ—¥å¿—</p></li><li><p>Where&#x2F;When åœ¨å“ªé‡Œ&#x2F;ä»€ä¹ˆæ—¶å€™æ‰“æ—¥å¿—</p></li><li><p>How æ€ä¹ˆæ‰“æ—¥å¿—</p></li></ol><h3 id="2-è®°å½•æ—¥å¿—"><a href="#2-è®°å½•æ—¥å¿—" class="headerlink" title="2. è®°å½•æ—¥å¿—"></a>2. è®°å½•æ—¥å¿—</h3><h3 id="3-æŸ¥çœ‹æ—¥å¿—"><a href="#3-æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="3. æŸ¥çœ‹æ—¥å¿—"></a>3. æŸ¥çœ‹æ—¥å¿—</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ›¾ä¸çŸ¥åœ¨å“ªå¬è¿‡ä¸€ç»å…¸åå¥ï¼šç¨‹åºå‘˜çš„å·¥ä½œæœ‰ä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯å†™ Bugï¼ŒäºŒæ˜¯æ‰¾ Bugã€‚&lt;/p&gt;
&lt;p&gt;è¯´å½’è¯´ç¬‘å½’ç¬‘ï¼Œå¥ˆä½•è¯ç³™ç†ä¸ç³™ï¼šåœ¨ç¨‹åºå‘˜çš„å·¥ä½œä¸­ï¼ŒBugçš„æ’æŸ¥åˆ†æå’Œè§£å†³éªŒè¯ç¡®å®å ç›¸å½“å¯è§‚çš„ä¸€éƒ¨åˆ†æ—¶é—´ã€‚&lt;br&gt;é‚£ä¹ˆè¯´åˆ°ï¼Œè€Œåœ¨çœŸæ­£æ’æŸ¥ Bug æ—¶ï¼Œæ‰æ·±åˆ»ä½“ä¼šåˆ°å¦ä¸€åå¥ï¼šä¸å†™æ—¥å¿—ä¸€</summary>
      
    
    
    
    <category term="Technology" scheme="https://amonxu.com/categories/Technology/"/>
    
    
    <category term="k8s" scheme="https://amonxu.com/tags/k8s/"/>
    
    <category term="log" scheme="https://amonxu.com/tags/log/"/>
    
    <category term="é˜¿é‡Œäº‘" scheme="https://amonxu.com/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
    <category term="docker" scheme="https://amonxu.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šä¸­å›½æŠ˜å ã€‹</title>
    <link href="https://amonxu.com/2022/08/18/zh-CN/2022-08-18-Folding-World/"/>
    <id>https://amonxu.com/2022/08/18/zh-CN/2022-08-18-Folding-World/</id>
    <published>2022-08-17T17:01:01.000Z</published>
    <updated>2023-09-04T09:54:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘æŠ˜å äº†ä¸­å›½ï¼Œ<br>å› ä¸ºæˆ‘æƒ³ä½ ï¼Œ<br>æƒ³ä½ åˆ°çªç ´å‡ ä½•è·ç¦»ã€‚</p><p>å¹¿ä¸œå’Œæ±Ÿè¥¿å åœ¨ä¸€èµ·ï¼Œ<br>ä½ å è¿›æˆ‘çš„èº«ä½“ã€‚</p><blockquote><p>å†™ç»™ä¸€å¯¹åˆ†éš”ç²¤èµ£ä¸¤åœ°çš„æ‹äºº</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æˆ‘æŠ˜å äº†ä¸­å›½ï¼Œ&lt;br&gt;å› ä¸ºæˆ‘æƒ³ä½ ï¼Œ&lt;br&gt;æƒ³ä½ åˆ°çªç ´å‡ ä½•è·ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;å¹¿ä¸œå’Œæ±Ÿè¥¿å åœ¨ä¸€èµ·ï¼Œ&lt;br&gt;ä½ å è¿›æˆ‘çš„èº«ä½“ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å†™ç»™ä¸€å¯¹åˆ†éš”ç²¤èµ£ä¸¤åœ°çš„æ‹äºº&lt;/p&gt;
&lt;/blockquote&gt;
</summary>
      
    
    
    
    <category term="è¯—" scheme="https://amonxu.com/categories/%E8%AF%97/"/>
    
    
    <category term="è¯—" scheme="https://amonxu.com/tags/%E8%AF%97/"/>
    
    <category term="2022" scheme="https://amonxu.com/tags/2022/"/>
    
  </entry>
  
</feed>
